<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Eliot J. B. McIntire" />


<title>Introduction to Cache</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' || rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">Introduction to Cache</h1>
<h4 class="author">Eliot J. B. McIntire</h4>
<h4 class="date">March 18 2019</h4>


<div id="TOC">
<ul>
<li><a href="#reproducible-workflow"><span class="toc-section-number">1</span> Reproducible workflow</a><ul>
<li><a href="#differences-with-other-approaches"><span class="toc-section-number">1.1</span> Differences with other approaches</a></li>
<li><a href="#function-level-caching"><span class="toc-section-number">1.2</span> Function-level caching</a></li>
<li><a href="#caching-examples"><span class="toc-section-number">1.3</span> Caching examples</a><ul>
<li><a href="#basic-use"><span class="toc-section-number">1.3.1</span> Basic use</a></li>
</ul></li>
<li><a href="#example-1-basic-cache-use-with-tags"><span class="toc-section-number">1.4</span> Example 1: Basic cache use with tags</a></li>
<li><a href="#example-2-using-the-accessed-tag"><span class="toc-section-number">1.5</span> Example 2: using the “accessed” tag</a></li>
<li><a href="#example-3-using-keepcache"><span class="toc-section-number">1.6</span> Example 3: using keepCache</a></li>
<li><a href="#example-4-searching-for-multiple-objects-in-the-cache"><span class="toc-section-number">1.7</span> Example 4: searching for multiple objects in the cache</a></li>
<li><a href="#example-5-using-caching-to-speed-up-rerunning-expensive-computations"><span class="toc-section-number">1.8</span> Example 5: using caching to speed up rerunning expensive computations</a></li>
<li><a href="#nested-caching"><span class="toc-section-number">1.9</span> Nested Caching</a></li>
<li><a href="#cacheid"><span class="toc-section-number">1.10</span> cacheId</a></li>
<li><a href="#working-with-the-cache-manually"><span class="toc-section-number">1.11</span> Working with the Cache manually</a></li>
</ul></li>
<li><a href="#reproducible-workflow-1"><span class="toc-section-number">2</span> Reproducible Workflow</a><ul>
<li><a href="#nested-caching-1"><span class="toc-section-number">2.1</span> Nested Caching</a></li>
</ul></li>
</ul>
</div>

<div id="reproducible-workflow" class="section level1">
<h1><span class="header-section-number">1</span> Reproducible workflow</h1>
<p>As part of a reproducible workflow, caching of function calls, code chunks, and other elements of a project is a critical component. The objective of a reproducible workflow is is likely that an entire work flow from raw data to publication, decision support, report writing, presentation building etc., could be built and be reproducible anywhere, on any computer, operating system, with any starting conditions, on demand. The <code>reproducible::Cache</code> function is built to work with any R function.</p>
<div id="differences-with-other-approaches" class="section level2">
<h2><span class="header-section-number">1.1</span> Differences with other approaches</h2>
<p><code>Cache</code> uses 2 key the <code>archivist</code> functions <code>saveToLocalRepo</code> and <code>loadFromLocalRepo</code>, but does not use <code>archivist::cache</code>. Similar to <code>archivist::cache</code>, there is some reliance on <code>digest::digest</code> to determine whether the arguments are identical in subsequent iterations. It also but does <em>many</em> things that make standard caching with <code>digest::digest</code> don’t work reliably between systems. For these, the function <code>.robustDigest</code> is introduced to make caching transferable between systems. This is relevant for file paths, environments, parallel clusters, functions (which are contained within an environment), and many others (e.g., see <code>?.robustDigest</code> for methods). <code>Cache</code> also adds important elements like automated tagging and the option to retrieve disk-cached values via stashed objects in memory using <code>memoise::memoise</code>. This means that running <code>Cache</code> 1, 2, and 3 times on the same function will get progressively faster. This can be extremely useful for web apps built with, say <code>shiny</code>.</p>
</div>
<div id="function-level-caching" class="section level2">
<h2><span class="header-section-number">1.2</span> Function-level caching</h2>
<p>Any function can be cached using: <code>Cache(FUN = functionName, ...)</code>.</p>
<p>This will be a slight change to a function call, such as: <code>projectRaster(raster, crs = crs(newRaster))</code> to <code>Cache(projectRaster, raster, crs = crs(newRaster))</code>.</p>
<p>This is particularly useful for expensive operations.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(raster)</code></pre></div>
<pre><code>## Loading required package: sp</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(reproducible)

tmpDir &lt;-<span class="st"> </span><span class="kw">file.path</span>(<span class="kw">tempdir</span>(), <span class="st">&quot;reproducible_examples&quot;</span>, <span class="st">&quot;Cache&quot;</span>)
<span class="kw">checkPath</span>(tmpDir, <span class="dt">create =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>## [1] &quot;/tmp/RtmpqUrpyD/reproducible_examples/Cache&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ras &lt;-<span class="st"> </span><span class="kw">raster</span>(<span class="kw">extent</span>(<span class="dv">0</span>, <span class="dv">1000</span>, <span class="dv">0</span>, <span class="dv">1000</span>), <span class="dt">vals =</span> <span class="dv">1</span><span class="op">:</span><span class="fl">1e6</span>, <span class="dt">res =</span> <span class="dv">1</span>)
<span class="kw">crs</span>(ras) &lt;-<span class="st"> &quot;+proj=lcc +lat_1=48 +lat_2=33 +lon_0=-100 +ellps=WGS84&quot;</span>

newCRS &lt;-<span class="st"> &quot;+init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0&quot;</span>
<span class="co"># No Cache</span>
<span class="kw">system.time</span>(map1 &lt;-<span class="st"> </span><span class="kw">projectRaster</span>(ras, <span class="dt">crs =</span> newCRS))</code></pre></div>
<pre><code>##    user  system elapsed 
##   2.538   0.230   2.772</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># With Cache -- a little slower the first time because saving to disk</span>
<span class="kw">system.time</span>(map1 &lt;-<span class="st"> </span><span class="kw">Cache</span>(projectRaster, ras, <span class="dt">crs =</span> newCRS, <span class="dt">cacheRepo =</span> tmpDir,
                         <span class="dt">notOlderThan =</span> <span class="kw">Sys.time</span>()))</code></pre></div>
<pre><code>##    user  system elapsed 
##   2.450   0.187   2.771</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># vastly faster the second time</span>
<span class="kw">system.time</span>(map2 &lt;-<span class="st"> </span><span class="kw">Cache</span>(projectRaster, ras, <span class="dt">crs =</span> newCRS, <span class="dt">cacheRepo =</span> tmpDir))</code></pre></div>
<pre><code>##   loading cached result from previous projectRaster call, adding to memoised copy</code></pre>
<pre><code>##    user  system elapsed 
##   0.089   0.004   0.093</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># even faster the third time</span>
<span class="kw">system.time</span>(map3 &lt;-<span class="st"> </span><span class="kw">Cache</span>(projectRaster, ras, <span class="dt">crs =</span> newCRS, <span class="dt">cacheRepo =</span> tmpDir))</code></pre></div>
<pre><code>##   loading memoised result from previous projectRaster call.</code></pre>
<pre><code>##    user  system elapsed 
##   0.026   0.000   0.027</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">all.equal</span>(map1, map2) <span class="co"># TRUE</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">all.equal</span>(map1, map3) <span class="co"># TRUE</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="caching-examples" class="section level2">
<h2><span class="header-section-number">1.3</span> Caching examples</h2>
<div id="basic-use" class="section level3">
<h3><span class="header-section-number">1.3.1</span> Basic use</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(raster)
<span class="kw">library</span>(magrittr)</code></pre></div>
<pre><code>## 
## Attaching package: 'magrittr'</code></pre>
<pre><code>## The following object is masked from 'package:raster':
## 
##     extract</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">try</span>(<span class="kw">clearCache</span>(tmpDir, <span class="dt">ask =</span> <span class="ot">FALSE</span>), <span class="dt">silent =</span> <span class="ot">TRUE</span>) <span class="co"># just to make sure it is clear</span>

ranNumsA &lt;-<span class="st"> </span><span class="kw">Cache</span>(rnorm, <span class="dv">10</span>, <span class="dv">16</span>, <span class="dt">cacheRepo =</span> tmpDir)

<span class="co"># All same</span>
ranNumsB &lt;-<span class="st"> </span><span class="kw">Cache</span>(rnorm, <span class="dv">10</span>, <span class="dv">16</span>, <span class="dt">cacheRepo =</span> tmpDir) <span class="co"># recovers cached copy</span></code></pre></div>
<pre><code>##   loading cached result from previous rnorm call, adding to memoised copy</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ranNumsC &lt;-<span class="st"> </span><span class="kw">Cache</span>(<span class="dt">cacheRepo =</span> tmpDir) <span class="op">%C%</span><span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">10</span>, <span class="dv">16</span>)  <span class="co"># recovers cached copy</span></code></pre></div>
<pre><code>##   loading memoised result from previous 'rnorm' pipe sequence call.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ranNumsD &lt;-<span class="st"> </span><span class="kw">Cache</span>(<span class="kw">quote</span>(<span class="kw">rnorm</span>(<span class="dt">n =</span> <span class="dv">10</span>, <span class="dv">16</span>)), <span class="dt">cacheRepo =</span> tmpDir) <span class="co"># recovers cached copy</span></code></pre></div>
<pre><code>##   loading memoised result from previous rnorm call.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Any minor change makes it different</span>
ranNumsE &lt;-<span class="st"> </span><span class="kw">Cache</span>(<span class="dt">cacheRepo =</span> tmpDir) <span class="op">%C%</span><span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">10</span>, <span class="dv">6</span>) <span class="co"># different</span></code></pre></div>
</div>
</div>
<div id="example-1-basic-cache-use-with-tags" class="section level2">
<h2><span class="header-section-number">1.4</span> Example 1: Basic cache use with tags</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ranNumsA &lt;-<span class="st"> </span><span class="kw">Cache</span>(rnorm, <span class="dv">4</span>, <span class="dt">cacheRepo =</span> tmpDir, <span class="dt">userTags =</span> <span class="st">&quot;objectName:a&quot;</span>)
ranNumsB &lt;-<span class="st"> </span><span class="kw">Cache</span>(runif, <span class="dv">4</span>, <span class="dt">cacheRepo =</span> tmpDir, <span class="dt">userTags =</span> <span class="st">&quot;objectName:b&quot;</span>)

<span class="kw">showCache</span>(tmpDir, <span class="dt">userTags =</span> <span class="kw">c</span>(<span class="st">&quot;objectName&quot;</span>))</code></pre></div>
<pre><code>## Cache size:</code></pre>
<pre><code>##   Total (including Rasters): 1 Kb</code></pre>
<pre><code>##   Selected objects (not including Rasters): 504 bytes</code></pre>
<pre><code>##                             artifact         tagKey
##  1: 54c6831864905d1c1ce378906fa5aee2         format
##  2: 54c6831864905d1c1ce378906fa5aee2           name
##  3: 54c6831864905d1c1ce378906fa5aee2          class
##  4: 54c6831864905d1c1ce378906fa5aee2           date
##  5: 54c6831864905d1c1ce378906fa5aee2        cacheId
##  6: 54c6831864905d1c1ce378906fa5aee2     objectName
##  7: 54c6831864905d1c1ce378906fa5aee2       function
##  8: 54c6831864905d1c1ce378906fa5aee2    object.size
##  9: 54c6831864905d1c1ce378906fa5aee2       accessed
## 10: 54c6831864905d1c1ce378906fa5aee2 otherFunctions
## 11: 54c6831864905d1c1ce378906fa5aee2 otherFunctions
## 12: 54c6831864905d1c1ce378906fa5aee2 otherFunctions
## 13: 54c6831864905d1c1ce378906fa5aee2 otherFunctions
## 14: 54c6831864905d1c1ce378906fa5aee2 otherFunctions
## 15: 54c6831864905d1c1ce378906fa5aee2 otherFunctions
## 16: 54c6831864905d1c1ce378906fa5aee2 otherFunctions
## 17: 54c6831864905d1c1ce378906fa5aee2 otherFunctions
## 18: 54c6831864905d1c1ce378906fa5aee2 otherFunctions
## 19: 54c6831864905d1c1ce378906fa5aee2 otherFunctions
## 20: 54c6831864905d1c1ce378906fa5aee2      preDigest
## 21: 54c6831864905d1c1ce378906fa5aee2      preDigest
## 22: 9e3abba2bfbacd48314e82764730782a         format
## 23: 9e3abba2bfbacd48314e82764730782a           name
## 24: 9e3abba2bfbacd48314e82764730782a          class
## 25: 9e3abba2bfbacd48314e82764730782a           date
## 26: 9e3abba2bfbacd48314e82764730782a        cacheId
## 27: 9e3abba2bfbacd48314e82764730782a     objectName
## 28: 9e3abba2bfbacd48314e82764730782a       function
## 29: 9e3abba2bfbacd48314e82764730782a    object.size
## 30: 9e3abba2bfbacd48314e82764730782a       accessed
## 31: 9e3abba2bfbacd48314e82764730782a otherFunctions
## 32: 9e3abba2bfbacd48314e82764730782a otherFunctions
## 33: 9e3abba2bfbacd48314e82764730782a otherFunctions
## 34: 9e3abba2bfbacd48314e82764730782a otherFunctions
## 35: 9e3abba2bfbacd48314e82764730782a otherFunctions
## 36: 9e3abba2bfbacd48314e82764730782a otherFunctions
## 37: 9e3abba2bfbacd48314e82764730782a otherFunctions
## 38: 9e3abba2bfbacd48314e82764730782a otherFunctions
## 39: 9e3abba2bfbacd48314e82764730782a otherFunctions
## 40: 9e3abba2bfbacd48314e82764730782a otherFunctions
## 41: 9e3abba2bfbacd48314e82764730782a      preDigest
## 42: 9e3abba2bfbacd48314e82764730782a      preDigest
##                             artifact         tagKey
##                             tagValue         createdDate
##  1:                              rda 2019-03-18 10:09:07
##  2: 54c6831864905d1c1ce378906fa5aee2 2019-03-18 10:09:07
##  3:                          numeric 2019-03-18 10:09:07
##  4:              2019-03-18 10:09:07 2019-03-18 10:09:07
##  5:                 3aef38d1fc02aee5 2019-03-18 10:09:07
##  6:                                b 2019-03-18 10:09:07
##  7:                            runif 2019-03-18 10:09:07
##  8:                             1008 2019-03-18 10:09:07
##  9:              2019-03-18 10:09:07 2019-03-18 10:09:07
## 10:                 vweave_rmarkdown 2019-03-18 10:09:07
## 11:                     process_file 2019-03-18 10:09:07
## 12:                    process_group 2019-03-18 10:09:07
## 13:              process_group.block 2019-03-18 10:09:07
## 14:                       call_block 2019-03-18 10:09:07
## 15:                       block_exec 2019-03-18 10:09:07
## 16:                           in_dir 2019-03-18 10:09:07
## 17:                        timing_fn 2019-03-18 10:09:07
## 18:                           handle 2019-03-18 10:09:07
## 19:                      withVisible 2019-03-18 10:09:07
## 20:               n:7eef4eae85fd9229 2019-03-18 10:09:07
## 21:            .FUN:881ec847b7161f3c 2019-03-18 10:09:07
## 22:                              rda 2019-03-18 10:09:07
## 23: 9e3abba2bfbacd48314e82764730782a 2019-03-18 10:09:07
## 24:                          numeric 2019-03-18 10:09:07
## 25:              2019-03-18 10:09:07 2019-03-18 10:09:07
## 26:                 f7bee22047b8d0c1 2019-03-18 10:09:07
## 27:                                a 2019-03-18 10:09:07
## 28:                            rnorm 2019-03-18 10:09:07
## 29:                             1008 2019-03-18 10:09:07
## 30:              2019-03-18 10:09:07 2019-03-18 10:09:07
## 31:                 vweave_rmarkdown 2019-03-18 10:09:07
## 32:                     process_file 2019-03-18 10:09:07
## 33:                    process_group 2019-03-18 10:09:07
## 34:              process_group.block 2019-03-18 10:09:07
## 35:                       call_block 2019-03-18 10:09:07
## 36:                       block_exec 2019-03-18 10:09:07
## 37:                           in_dir 2019-03-18 10:09:07
## 38:                        timing_fn 2019-03-18 10:09:07
## 39:                           handle 2019-03-18 10:09:07
## 40:                      withVisible 2019-03-18 10:09:07
## 41:               n:7eef4eae85fd9229 2019-03-18 10:09:07
## 42:            .FUN:4f604aa46882b368 2019-03-18 10:09:07
##                             tagValue         createdDate</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">showCache</span>(tmpDir, <span class="dt">userTags =</span> <span class="kw">c</span>(<span class="st">&quot;^a$&quot;</span>)) <span class="co"># regular expression ... &quot;a&quot; exactly</span></code></pre></div>
<pre><code>## Cache size:</code></pre>
<pre><code>##   Total (including Rasters): 1 Kb</code></pre>
<pre><code>##   Selected objects (not including Rasters): 252 bytes</code></pre>
<pre><code>##                             artifact         tagKey
##  1: 9e3abba2bfbacd48314e82764730782a         format
##  2: 9e3abba2bfbacd48314e82764730782a           name
##  3: 9e3abba2bfbacd48314e82764730782a          class
##  4: 9e3abba2bfbacd48314e82764730782a           date
##  5: 9e3abba2bfbacd48314e82764730782a        cacheId
##  6: 9e3abba2bfbacd48314e82764730782a     objectName
##  7: 9e3abba2bfbacd48314e82764730782a       function
##  8: 9e3abba2bfbacd48314e82764730782a    object.size
##  9: 9e3abba2bfbacd48314e82764730782a       accessed
## 10: 9e3abba2bfbacd48314e82764730782a otherFunctions
## 11: 9e3abba2bfbacd48314e82764730782a otherFunctions
## 12: 9e3abba2bfbacd48314e82764730782a otherFunctions
## 13: 9e3abba2bfbacd48314e82764730782a otherFunctions
## 14: 9e3abba2bfbacd48314e82764730782a otherFunctions
## 15: 9e3abba2bfbacd48314e82764730782a otherFunctions
## 16: 9e3abba2bfbacd48314e82764730782a otherFunctions
## 17: 9e3abba2bfbacd48314e82764730782a otherFunctions
## 18: 9e3abba2bfbacd48314e82764730782a otherFunctions
## 19: 9e3abba2bfbacd48314e82764730782a otherFunctions
## 20: 9e3abba2bfbacd48314e82764730782a      preDigest
## 21: 9e3abba2bfbacd48314e82764730782a      preDigest
##                             artifact         tagKey
##                             tagValue         createdDate
##  1:                              rda 2019-03-18 10:09:07
##  2: 9e3abba2bfbacd48314e82764730782a 2019-03-18 10:09:07
##  3:                          numeric 2019-03-18 10:09:07
##  4:              2019-03-18 10:09:07 2019-03-18 10:09:07
##  5:                 f7bee22047b8d0c1 2019-03-18 10:09:07
##  6:                                a 2019-03-18 10:09:07
##  7:                            rnorm 2019-03-18 10:09:07
##  8:                             1008 2019-03-18 10:09:07
##  9:              2019-03-18 10:09:07 2019-03-18 10:09:07
## 10:                 vweave_rmarkdown 2019-03-18 10:09:07
## 11:                     process_file 2019-03-18 10:09:07
## 12:                    process_group 2019-03-18 10:09:07
## 13:              process_group.block 2019-03-18 10:09:07
## 14:                       call_block 2019-03-18 10:09:07
## 15:                       block_exec 2019-03-18 10:09:07
## 16:                           in_dir 2019-03-18 10:09:07
## 17:                        timing_fn 2019-03-18 10:09:07
## 18:                           handle 2019-03-18 10:09:07
## 19:                      withVisible 2019-03-18 10:09:07
## 20:               n:7eef4eae85fd9229 2019-03-18 10:09:07
## 21:            .FUN:4f604aa46882b368 2019-03-18 10:09:07
##                             tagValue         createdDate</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">showCache</span>(tmpDir, <span class="dt">userTags =</span> <span class="kw">c</span>(<span class="st">&quot;runif&quot;</span>)) <span class="co"># show only cached objects made during runif call</span></code></pre></div>
<pre><code>## Cache size:</code></pre>
<pre><code>##   Total (including Rasters): 1 Kb</code></pre>
<pre><code>##   Selected objects (not including Rasters): 252 bytes</code></pre>
<pre><code>##                             artifact         tagKey
##  1: 54c6831864905d1c1ce378906fa5aee2         format
##  2: 54c6831864905d1c1ce378906fa5aee2           name
##  3: 54c6831864905d1c1ce378906fa5aee2          class
##  4: 54c6831864905d1c1ce378906fa5aee2           date
##  5: 54c6831864905d1c1ce378906fa5aee2        cacheId
##  6: 54c6831864905d1c1ce378906fa5aee2     objectName
##  7: 54c6831864905d1c1ce378906fa5aee2       function
##  8: 54c6831864905d1c1ce378906fa5aee2    object.size
##  9: 54c6831864905d1c1ce378906fa5aee2       accessed
## 10: 54c6831864905d1c1ce378906fa5aee2 otherFunctions
## 11: 54c6831864905d1c1ce378906fa5aee2 otherFunctions
## 12: 54c6831864905d1c1ce378906fa5aee2 otherFunctions
## 13: 54c6831864905d1c1ce378906fa5aee2 otherFunctions
## 14: 54c6831864905d1c1ce378906fa5aee2 otherFunctions
## 15: 54c6831864905d1c1ce378906fa5aee2 otherFunctions
## 16: 54c6831864905d1c1ce378906fa5aee2 otherFunctions
## 17: 54c6831864905d1c1ce378906fa5aee2 otherFunctions
## 18: 54c6831864905d1c1ce378906fa5aee2 otherFunctions
## 19: 54c6831864905d1c1ce378906fa5aee2 otherFunctions
## 20: 54c6831864905d1c1ce378906fa5aee2      preDigest
## 21: 54c6831864905d1c1ce378906fa5aee2      preDigest
##                             artifact         tagKey
##                             tagValue         createdDate
##  1:                              rda 2019-03-18 10:09:07
##  2: 54c6831864905d1c1ce378906fa5aee2 2019-03-18 10:09:07
##  3:                          numeric 2019-03-18 10:09:07
##  4:              2019-03-18 10:09:07 2019-03-18 10:09:07
##  5:                 3aef38d1fc02aee5 2019-03-18 10:09:07
##  6:                                b 2019-03-18 10:09:07
##  7:                            runif 2019-03-18 10:09:07
##  8:                             1008 2019-03-18 10:09:07
##  9:              2019-03-18 10:09:07 2019-03-18 10:09:07
## 10:                 vweave_rmarkdown 2019-03-18 10:09:07
## 11:                     process_file 2019-03-18 10:09:07
## 12:                    process_group 2019-03-18 10:09:07
## 13:              process_group.block 2019-03-18 10:09:07
## 14:                       call_block 2019-03-18 10:09:07
## 15:                       block_exec 2019-03-18 10:09:07
## 16:                           in_dir 2019-03-18 10:09:07
## 17:                        timing_fn 2019-03-18 10:09:07
## 18:                           handle 2019-03-18 10:09:07
## 19:                      withVisible 2019-03-18 10:09:07
## 20:               n:7eef4eae85fd9229 2019-03-18 10:09:07
## 21:            .FUN:881ec847b7161f3c 2019-03-18 10:09:07
##                             tagValue         createdDate</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">clearCache</span>(tmpDir, <span class="dt">userTags =</span> <span class="kw">c</span>(<span class="st">&quot;runif&quot;</span>), <span class="dt">ask =</span> <span class="ot">FALSE</span>) <span class="co"># remove only cached objects made during runif call</span></code></pre></div>
<pre><code>## Cache size:</code></pre>
<pre><code>##   Total (including Rasters): 1 Kb</code></pre>
<pre><code>##   Selected objects (not including Rasters): 252 bytes</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">showCache</span>(tmpDir) <span class="co"># only those made during rnorm call</span></code></pre></div>
<pre><code>## Cache size:</code></pre>
<pre><code>##   Total (including Rasters): 804 bytes</code></pre>
<pre><code>##   Selected objects (not including Rasters): 804 bytes</code></pre>
<pre><code>##                             artifact         tagKey
##  1: 40afe0e54cb6b58b07089e62b71c52c6         format
##  2: 40afe0e54cb6b58b07089e62b71c52c6           name
##  3: 40afe0e54cb6b58b07089e62b71c52c6          class
##  4: 40afe0e54cb6b58b07089e62b71c52c6           date
##  5: 40afe0e54cb6b58b07089e62b71c52c6        cacheId
##  6: 40afe0e54cb6b58b07089e62b71c52c6       function
##  7: 40afe0e54cb6b58b07089e62b71c52c6    object.size
##  8: 40afe0e54cb6b58b07089e62b71c52c6       accessed
##  9: 40afe0e54cb6b58b07089e62b71c52c6 otherFunctions
## 10: 40afe0e54cb6b58b07089e62b71c52c6 otherFunctions
## 11: 40afe0e54cb6b58b07089e62b71c52c6 otherFunctions
## 12: 40afe0e54cb6b58b07089e62b71c52c6 otherFunctions
## 13: 40afe0e54cb6b58b07089e62b71c52c6 otherFunctions
## 14: 40afe0e54cb6b58b07089e62b71c52c6 otherFunctions
## 15: 40afe0e54cb6b58b07089e62b71c52c6 otherFunctions
## 16: 40afe0e54cb6b58b07089e62b71c52c6 otherFunctions
## 17: 40afe0e54cb6b58b07089e62b71c52c6 otherFunctions
## 18: 40afe0e54cb6b58b07089e62b71c52c6 otherFunctions
## 19: 40afe0e54cb6b58b07089e62b71c52c6      preDigest
## 20: 40afe0e54cb6b58b07089e62b71c52c6      preDigest
## 21: 40afe0e54cb6b58b07089e62b71c52c6      preDigest
## 22: 40afe0e54cb6b58b07089e62b71c52c6       accessed
## 23: 40afe0e54cb6b58b07089e62b71c52c6       accessed
## 24: 40afe0e54cb6b58b07089e62b71c52c6       accessed
## 25: 9e3abba2bfbacd48314e82764730782a         format
## 26: 9e3abba2bfbacd48314e82764730782a           name
## 27: 9e3abba2bfbacd48314e82764730782a          class
## 28: 9e3abba2bfbacd48314e82764730782a           date
## 29: 9e3abba2bfbacd48314e82764730782a        cacheId
## 30: 9e3abba2bfbacd48314e82764730782a     objectName
## 31: 9e3abba2bfbacd48314e82764730782a       function
## 32: 9e3abba2bfbacd48314e82764730782a    object.size
## 33: 9e3abba2bfbacd48314e82764730782a       accessed
## 34: 9e3abba2bfbacd48314e82764730782a otherFunctions
## 35: 9e3abba2bfbacd48314e82764730782a otherFunctions
## 36: 9e3abba2bfbacd48314e82764730782a otherFunctions
## 37: 9e3abba2bfbacd48314e82764730782a otherFunctions
## 38: 9e3abba2bfbacd48314e82764730782a otherFunctions
## 39: 9e3abba2bfbacd48314e82764730782a otherFunctions
## 40: 9e3abba2bfbacd48314e82764730782a otherFunctions
## 41: 9e3abba2bfbacd48314e82764730782a otherFunctions
## 42: 9e3abba2bfbacd48314e82764730782a otherFunctions
## 43: 9e3abba2bfbacd48314e82764730782a otherFunctions
## 44: 9e3abba2bfbacd48314e82764730782a      preDigest
## 45: 9e3abba2bfbacd48314e82764730782a      preDigest
## 46: f7385a3095e644dbec813a45bc5544e3         format
## 47: f7385a3095e644dbec813a45bc5544e3           name
## 48: f7385a3095e644dbec813a45bc5544e3          class
## 49: f7385a3095e644dbec813a45bc5544e3           date
## 50: f7385a3095e644dbec813a45bc5544e3        cacheId
## 51: f7385a3095e644dbec813a45bc5544e3       function
## 52: f7385a3095e644dbec813a45bc5544e3    object.size
## 53: f7385a3095e644dbec813a45bc5544e3       accessed
## 54: f7385a3095e644dbec813a45bc5544e3 otherFunctions
## 55: f7385a3095e644dbec813a45bc5544e3 otherFunctions
## 56: f7385a3095e644dbec813a45bc5544e3 otherFunctions
## 57: f7385a3095e644dbec813a45bc5544e3 otherFunctions
## 58: f7385a3095e644dbec813a45bc5544e3 otherFunctions
## 59: f7385a3095e644dbec813a45bc5544e3 otherFunctions
## 60: f7385a3095e644dbec813a45bc5544e3 otherFunctions
## 61: f7385a3095e644dbec813a45bc5544e3 otherFunctions
## 62: f7385a3095e644dbec813a45bc5544e3 otherFunctions
## 63: f7385a3095e644dbec813a45bc5544e3 otherFunctions
## 64: f7385a3095e644dbec813a45bc5544e3 otherFunctions
## 65: f7385a3095e644dbec813a45bc5544e3 otherFunctions
## 66: f7385a3095e644dbec813a45bc5544e3      preDigest
## 67: f7385a3095e644dbec813a45bc5544e3      preDigest
## 68: f7385a3095e644dbec813a45bc5544e3      preDigest
##                             artifact         tagKey
##                             tagValue         createdDate
##  1:                              rda 2019-03-18 10:09:07
##  2: 40afe0e54cb6b58b07089e62b71c52c6 2019-03-18 10:09:07
##  3:                          numeric 2019-03-18 10:09:07
##  4:              2019-03-18 10:09:07 2019-03-18 10:09:07
##  5:                 f11fb1a2880f8060 2019-03-18 10:09:07
##  6:                            rnorm 2019-03-18 10:09:07
##  7:                             1104 2019-03-18 10:09:07
##  8:              2019-03-18 10:09:07 2019-03-18 10:09:07
##  9:                 vweave_rmarkdown 2019-03-18 10:09:07
## 10:                     process_file 2019-03-18 10:09:07
## 11:                    process_group 2019-03-18 10:09:07
## 12:              process_group.block 2019-03-18 10:09:07
## 13:                       call_block 2019-03-18 10:09:07
## 14:                       block_exec 2019-03-18 10:09:07
## 15:                           in_dir 2019-03-18 10:09:07
## 16:                        timing_fn 2019-03-18 10:09:07
## 17:                           handle 2019-03-18 10:09:07
## 18:                      withVisible 2019-03-18 10:09:07
## 19:               n:c5775c3b366fb719 2019-03-18 10:09:07
## 20:            mean:15620f138033a66c 2019-03-18 10:09:07
## 21:            .FUN:4f604aa46882b368 2019-03-18 10:09:07
## 22:              2019-03-18 10:09:07 2019-03-18 10:09:07
## 23:              2019-03-18 10:09:07 2019-03-18 10:09:07
## 24:              2019-03-18 10:09:07 2019-03-18 10:09:07
## 25:                              rda 2019-03-18 10:09:07
## 26: 9e3abba2bfbacd48314e82764730782a 2019-03-18 10:09:07
## 27:                          numeric 2019-03-18 10:09:07
## 28:              2019-03-18 10:09:07 2019-03-18 10:09:07
## 29:                 f7bee22047b8d0c1 2019-03-18 10:09:07
## 30:                                a 2019-03-18 10:09:07
## 31:                            rnorm 2019-03-18 10:09:07
## 32:                             1008 2019-03-18 10:09:07
## 33:              2019-03-18 10:09:07 2019-03-18 10:09:07
## 34:                 vweave_rmarkdown 2019-03-18 10:09:07
## 35:                     process_file 2019-03-18 10:09:07
## 36:                    process_group 2019-03-18 10:09:07
## 37:              process_group.block 2019-03-18 10:09:07
## 38:                       call_block 2019-03-18 10:09:07
## 39:                       block_exec 2019-03-18 10:09:07
## 40:                           in_dir 2019-03-18 10:09:07
## 41:                        timing_fn 2019-03-18 10:09:07
## 42:                           handle 2019-03-18 10:09:07
## 43:                      withVisible 2019-03-18 10:09:07
## 44:               n:7eef4eae85fd9229 2019-03-18 10:09:07
## 45:            .FUN:4f604aa46882b368 2019-03-18 10:09:07
## 46:                              rda 2019-03-18 10:09:07
## 47: f7385a3095e644dbec813a45bc5544e3 2019-03-18 10:09:07
## 48:                          numeric 2019-03-18 10:09:07
## 49:              2019-03-18 10:09:07 2019-03-18 10:09:07
## 50:                 c16f0e2c57596069 2019-03-18 10:09:07
## 51:              rnorm pipe sequence 2019-03-18 10:09:07
## 52:                             1104 2019-03-18 10:09:07
## 53:              2019-03-18 10:09:07 2019-03-18 10:09:07
## 54:                 vweave_rmarkdown 2019-03-18 10:09:07
## 55:                     process_file 2019-03-18 10:09:07
## 56:                    process_group 2019-03-18 10:09:07
## 57:              process_group.block 2019-03-18 10:09:07
## 58:                       call_block 2019-03-18 10:09:07
## 59:                       block_exec 2019-03-18 10:09:07
## 60:                           in_dir 2019-03-18 10:09:07
## 61:                        timing_fn 2019-03-18 10:09:07
## 62:                           handle 2019-03-18 10:09:07
## 63:                      withVisible 2019-03-18 10:09:07
## 64:                              %C% 2019-03-18 10:09:07
## 65:                          do.call 2019-03-18 10:09:07
## 66:               n:c5775c3b366fb719 2019-03-18 10:09:07
## 67:            mean:152602b8ff81e5bb 2019-03-18 10:09:07
## 68:            .FUN:4f604aa46882b368 2019-03-18 10:09:07
##                             tagValue         createdDate</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">clearCache</span>(tmpDir, <span class="dt">ask =</span> <span class="ot">FALSE</span>)</code></pre></div>
</div>
<div id="example-2-using-the-accessed-tag" class="section level2">
<h2><span class="header-section-number">1.5</span> Example 2: using the “accessed” tag</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ranNumsA &lt;-<span class="st"> </span><span class="kw">Cache</span>(rnorm, <span class="dv">4</span>, <span class="dt">cacheRepo =</span> tmpDir, <span class="dt">userTags =</span> <span class="st">&quot;objectName:a&quot;</span>)
ranNumsB &lt;-<span class="st"> </span><span class="kw">Cache</span>(runif, <span class="dv">4</span>, <span class="dt">cacheRepo =</span> tmpDir, <span class="dt">userTags =</span> <span class="st">&quot;objectName:b&quot;</span>)

<span class="co"># access it again, from Cache</span>
ranNumsA &lt;-<span class="st"> </span><span class="kw">Cache</span>(rnorm, <span class="dv">4</span>, <span class="dt">cacheRepo =</span> tmpDir, <span class="dt">userTags =</span> <span class="st">&quot;objectName:a&quot;</span>)</code></pre></div>
<pre><code>##   loading cached result from previous rnorm call, adding to memoised copy</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wholeCache &lt;-<span class="st"> </span><span class="kw">showCache</span>(tmpDir)</code></pre></div>
<pre><code>## Cache size:</code></pre>
<pre><code>##   Total (including Rasters): 504 bytes</code></pre>
<pre><code>##   Selected objects (not including Rasters): 504 bytes</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># keep only items accessed &quot;recently&quot; (i.e., only objectName:a)</span>
onlyRecentlyAccessed &lt;-<span class="st"> </span><span class="kw">showCache</span>(tmpDir, <span class="dt">userTags =</span> <span class="kw">max</span>(wholeCache[tagKey <span class="op">==</span><span class="st"> &quot;accessed&quot;</span>]<span class="op">$</span>tagValue))</code></pre></div>
<pre><code>## Cache size:</code></pre>
<pre><code>##   Total (including Rasters): 504 bytes</code></pre>
<pre><code>##   Selected objects (not including Rasters): 504 bytes</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># inverse join with 2 data.tables ... using: a[!b]</span>
<span class="co"># i.e., return all of wholeCache that was not recently accessed</span>
toRemove &lt;-<span class="st"> </span><span class="kw">unique</span>(wholeCache[<span class="op">!</span>onlyRecentlyAccessed], <span class="dt">by =</span> <span class="st">&quot;artifact&quot;</span>)<span class="op">$</span>artifact
<span class="kw">clearCache</span>(tmpDir, toRemove, <span class="dt">ask =</span> <span class="ot">FALSE</span>) <span class="co"># remove ones not recently accessed</span></code></pre></div>
<pre><code>## Cache size:</code></pre>
<pre><code>##   Total (including Rasters): 504 bytes</code></pre>
<pre><code>##   Selected objects (not including Rasters): 504 bytes</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">showCache</span>(tmpDir) <span class="co"># still has more recently accessed</span></code></pre></div>
<pre><code>## Cache size:</code></pre>
<pre><code>##   Total (including Rasters): 0 bytes</code></pre>
<pre><code>##   Selected objects (not including Rasters): 0 bytes</code></pre>
<pre><code>## Empty data.table (0 rows) of 3 cols: md5hash,name,createdDate</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">clearCache</span>(tmpDir, <span class="dt">ask =</span> <span class="ot">FALSE</span>)</code></pre></div>
</div>
<div id="example-3-using-keepcache" class="section level2">
<h2><span class="header-section-number">1.6</span> Example 3: using keepCache</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ranNumsA &lt;-<span class="st"> </span><span class="kw">Cache</span>(rnorm, <span class="dv">4</span>, <span class="dt">cacheRepo =</span> tmpDir, <span class="dt">userTags =</span> <span class="st">&quot;objectName:a&quot;</span>)
ranNumsB &lt;-<span class="st"> </span><span class="kw">Cache</span>(runif, <span class="dv">4</span>, <span class="dt">cacheRepo =</span> tmpDir, <span class="dt">userTags =</span> <span class="st">&quot;objectName:b&quot;</span>)

<span class="co"># keep only those cached items from the last 24 hours</span>
oneDay &lt;-<span class="st"> </span><span class="dv">60</span> <span class="op">*</span><span class="st"> </span><span class="dv">60</span> <span class="op">*</span><span class="st"> </span><span class="dv">24</span>
<span class="kw">keepCache</span>(tmpDir, <span class="dt">after =</span> <span class="kw">Sys.time</span>() <span class="op">-</span><span class="st"> </span>oneDay, <span class="dt">ask =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>## Cache size:</code></pre>
<pre><code>##   Total (including Rasters): 504 bytes</code></pre>
<pre><code>##   Selected objects (not including Rasters): 504 bytes</code></pre>
<pre><code>##                             artifact         tagKey
##  1: abecc1438c88ccd756219cc5b0524302         format
##  2: abecc1438c88ccd756219cc5b0524302           name
##  3: abecc1438c88ccd756219cc5b0524302          class
##  4: abecc1438c88ccd756219cc5b0524302           date
##  5: abecc1438c88ccd756219cc5b0524302        cacheId
##  6: abecc1438c88ccd756219cc5b0524302     objectName
##  7: abecc1438c88ccd756219cc5b0524302       function
##  8: abecc1438c88ccd756219cc5b0524302    object.size
##  9: abecc1438c88ccd756219cc5b0524302       accessed
## 10: abecc1438c88ccd756219cc5b0524302 otherFunctions
## 11: abecc1438c88ccd756219cc5b0524302 otherFunctions
## 12: abecc1438c88ccd756219cc5b0524302 otherFunctions
## 13: abecc1438c88ccd756219cc5b0524302 otherFunctions
## 14: abecc1438c88ccd756219cc5b0524302 otherFunctions
## 15: abecc1438c88ccd756219cc5b0524302 otherFunctions
## 16: abecc1438c88ccd756219cc5b0524302 otherFunctions
## 17: abecc1438c88ccd756219cc5b0524302 otherFunctions
## 18: abecc1438c88ccd756219cc5b0524302 otherFunctions
## 19: abecc1438c88ccd756219cc5b0524302 otherFunctions
## 20: abecc1438c88ccd756219cc5b0524302      preDigest
## 21: abecc1438c88ccd756219cc5b0524302      preDigest
## 22: dd5031e15a8e4d3e2db9403fa66f9d41         format
## 23: dd5031e15a8e4d3e2db9403fa66f9d41           name
## 24: dd5031e15a8e4d3e2db9403fa66f9d41          class
## 25: dd5031e15a8e4d3e2db9403fa66f9d41           date
## 26: dd5031e15a8e4d3e2db9403fa66f9d41        cacheId
## 27: dd5031e15a8e4d3e2db9403fa66f9d41     objectName
## 28: dd5031e15a8e4d3e2db9403fa66f9d41       function
## 29: dd5031e15a8e4d3e2db9403fa66f9d41    object.size
## 30: dd5031e15a8e4d3e2db9403fa66f9d41       accessed
## 31: dd5031e15a8e4d3e2db9403fa66f9d41 otherFunctions
## 32: dd5031e15a8e4d3e2db9403fa66f9d41 otherFunctions
## 33: dd5031e15a8e4d3e2db9403fa66f9d41 otherFunctions
## 34: dd5031e15a8e4d3e2db9403fa66f9d41 otherFunctions
## 35: dd5031e15a8e4d3e2db9403fa66f9d41 otherFunctions
## 36: dd5031e15a8e4d3e2db9403fa66f9d41 otherFunctions
## 37: dd5031e15a8e4d3e2db9403fa66f9d41 otherFunctions
## 38: dd5031e15a8e4d3e2db9403fa66f9d41 otherFunctions
## 39: dd5031e15a8e4d3e2db9403fa66f9d41 otherFunctions
## 40: dd5031e15a8e4d3e2db9403fa66f9d41 otherFunctions
## 41: dd5031e15a8e4d3e2db9403fa66f9d41      preDigest
## 42: dd5031e15a8e4d3e2db9403fa66f9d41      preDigest
##                             artifact         tagKey
##                             tagValue         createdDate
##  1:                              rda 2019-03-18 10:09:08
##  2: abecc1438c88ccd756219cc5b0524302 2019-03-18 10:09:08
##  3:                          numeric 2019-03-18 10:09:08
##  4:              2019-03-18 10:09:08 2019-03-18 10:09:08
##  5:                 f7bee22047b8d0c1 2019-03-18 10:09:08
##  6:                                a 2019-03-18 10:09:08
##  7:                            rnorm 2019-03-18 10:09:08
##  8:                             1008 2019-03-18 10:09:08
##  9:              2019-03-18 10:09:08 2019-03-18 10:09:08
## 10:                 vweave_rmarkdown 2019-03-18 10:09:08
## 11:                     process_file 2019-03-18 10:09:08
## 12:                    process_group 2019-03-18 10:09:08
## 13:              process_group.block 2019-03-18 10:09:08
## 14:                       call_block 2019-03-18 10:09:08
## 15:                       block_exec 2019-03-18 10:09:08
## 16:                           in_dir 2019-03-18 10:09:08
## 17:                        timing_fn 2019-03-18 10:09:08
## 18:                           handle 2019-03-18 10:09:08
## 19:                      withVisible 2019-03-18 10:09:08
## 20:               n:7eef4eae85fd9229 2019-03-18 10:09:08
## 21:            .FUN:4f604aa46882b368 2019-03-18 10:09:08
## 22:                              rda 2019-03-18 10:09:08
## 23: dd5031e15a8e4d3e2db9403fa66f9d41 2019-03-18 10:09:08
## 24:                          numeric 2019-03-18 10:09:08
## 25:              2019-03-18 10:09:08 2019-03-18 10:09:08
## 26:                 3aef38d1fc02aee5 2019-03-18 10:09:08
## 27:                                b 2019-03-18 10:09:08
## 28:                            runif 2019-03-18 10:09:08
## 29:                             1008 2019-03-18 10:09:08
## 30:              2019-03-18 10:09:08 2019-03-18 10:09:08
## 31:                 vweave_rmarkdown 2019-03-18 10:09:08
## 32:                     process_file 2019-03-18 10:09:08
## 33:                    process_group 2019-03-18 10:09:08
## 34:              process_group.block 2019-03-18 10:09:08
## 35:                       call_block 2019-03-18 10:09:08
## 36:                       block_exec 2019-03-18 10:09:08
## 37:                           in_dir 2019-03-18 10:09:08
## 38:                        timing_fn 2019-03-18 10:09:08
## 39:                           handle 2019-03-18 10:09:08
## 40:                      withVisible 2019-03-18 10:09:08
## 41:               n:7eef4eae85fd9229 2019-03-18 10:09:08
## 42:            .FUN:881ec847b7161f3c 2019-03-18 10:09:08
##                             tagValue         createdDate</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Keep all Cache items created with an rnorm() call</span>
<span class="kw">keepCache</span>(tmpDir, <span class="dt">userTags =</span> <span class="st">&quot;rnorm&quot;</span>, <span class="dt">ask =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>## Cache size:</code></pre>
<pre><code>##   Total (including Rasters): 504 bytes</code></pre>
<pre><code>##   Selected objects (not including Rasters): 252 bytes</code></pre>
<pre><code>##                             artifact         tagKey
##  1: abecc1438c88ccd756219cc5b0524302         format
##  2: abecc1438c88ccd756219cc5b0524302           name
##  3: abecc1438c88ccd756219cc5b0524302          class
##  4: abecc1438c88ccd756219cc5b0524302           date
##  5: abecc1438c88ccd756219cc5b0524302        cacheId
##  6: abecc1438c88ccd756219cc5b0524302     objectName
##  7: abecc1438c88ccd756219cc5b0524302       function
##  8: abecc1438c88ccd756219cc5b0524302    object.size
##  9: abecc1438c88ccd756219cc5b0524302       accessed
## 10: abecc1438c88ccd756219cc5b0524302 otherFunctions
## 11: abecc1438c88ccd756219cc5b0524302 otherFunctions
## 12: abecc1438c88ccd756219cc5b0524302 otherFunctions
## 13: abecc1438c88ccd756219cc5b0524302 otherFunctions
## 14: abecc1438c88ccd756219cc5b0524302 otherFunctions
## 15: abecc1438c88ccd756219cc5b0524302 otherFunctions
## 16: abecc1438c88ccd756219cc5b0524302 otherFunctions
## 17: abecc1438c88ccd756219cc5b0524302 otherFunctions
## 18: abecc1438c88ccd756219cc5b0524302 otherFunctions
## 19: abecc1438c88ccd756219cc5b0524302 otherFunctions
## 20: abecc1438c88ccd756219cc5b0524302      preDigest
## 21: abecc1438c88ccd756219cc5b0524302      preDigest
##                             artifact         tagKey
##                             tagValue         createdDate
##  1:                              rda 2019-03-18 10:09:08
##  2: abecc1438c88ccd756219cc5b0524302 2019-03-18 10:09:08
##  3:                          numeric 2019-03-18 10:09:08
##  4:              2019-03-18 10:09:08 2019-03-18 10:09:08
##  5:                 f7bee22047b8d0c1 2019-03-18 10:09:08
##  6:                                a 2019-03-18 10:09:08
##  7:                            rnorm 2019-03-18 10:09:08
##  8:                             1008 2019-03-18 10:09:08
##  9:              2019-03-18 10:09:08 2019-03-18 10:09:08
## 10:                 vweave_rmarkdown 2019-03-18 10:09:08
## 11:                     process_file 2019-03-18 10:09:08
## 12:                    process_group 2019-03-18 10:09:08
## 13:              process_group.block 2019-03-18 10:09:08
## 14:                       call_block 2019-03-18 10:09:08
## 15:                       block_exec 2019-03-18 10:09:08
## 16:                           in_dir 2019-03-18 10:09:08
## 17:                        timing_fn 2019-03-18 10:09:08
## 18:                           handle 2019-03-18 10:09:08
## 19:                      withVisible 2019-03-18 10:09:08
## 20:               n:7eef4eae85fd9229 2019-03-18 10:09:08
## 21:            .FUN:4f604aa46882b368 2019-03-18 10:09:08
##                             tagValue         createdDate</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Remove all Cache items that happened within a rnorm() call</span>
<span class="kw">clearCache</span>(tmpDir, <span class="dt">userTags =</span> <span class="st">&quot;rnorm&quot;</span>, <span class="dt">ask =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>## Cache size:</code></pre>
<pre><code>##   Total (including Rasters): 252 bytes</code></pre>
<pre><code>##   Selected objects (not including Rasters): 252 bytes</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">showCache</span>(tmpDir) ## empty</code></pre></div>
<pre><code>## Cache size:</code></pre>
<pre><code>##   Total (including Rasters): 0 bytes</code></pre>
<pre><code>##   Selected objects (not including Rasters): 0 bytes</code></pre>
<pre><code>## Empty data.table (0 rows) of 3 cols: md5hash,name,createdDate</code></pre>
</div>
<div id="example-4-searching-for-multiple-objects-in-the-cache" class="section level2">
<h2><span class="header-section-number">1.7</span> Example 4: searching for multiple objects in the cache</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># default userTags is &quot;and&quot; matching; for &quot;or&quot; matching use |</span>
ranNumsA &lt;-<span class="st"> </span><span class="kw">Cache</span>(runif, <span class="dv">4</span>, <span class="dt">cacheRepo =</span> tmpDir, <span class="dt">userTags =</span> <span class="st">&quot;objectName:a&quot;</span>)
ranNumsB &lt;-<span class="st"> </span><span class="kw">Cache</span>(rnorm, <span class="dv">4</span>, <span class="dt">cacheRepo =</span> tmpDir, <span class="dt">userTags =</span> <span class="st">&quot;objectName:b&quot;</span>)

<span class="co"># show all objects (runif and rnorm in this case)</span>
<span class="kw">showCache</span>(tmpDir)</code></pre></div>
<pre><code>## Cache size:</code></pre>
<pre><code>##   Total (including Rasters): 504 bytes</code></pre>
<pre><code>##   Selected objects (not including Rasters): 504 bytes</code></pre>
<pre><code>##                             artifact         tagKey
##  1: bef41a90b34bec8f0e8521cab176db7b         format
##  2: bef41a90b34bec8f0e8521cab176db7b           name
##  3: bef41a90b34bec8f0e8521cab176db7b          class
##  4: bef41a90b34bec8f0e8521cab176db7b           date
##  5: bef41a90b34bec8f0e8521cab176db7b        cacheId
##  6: bef41a90b34bec8f0e8521cab176db7b     objectName
##  7: bef41a90b34bec8f0e8521cab176db7b       function
##  8: bef41a90b34bec8f0e8521cab176db7b    object.size
##  9: bef41a90b34bec8f0e8521cab176db7b       accessed
## 10: bef41a90b34bec8f0e8521cab176db7b otherFunctions
## 11: bef41a90b34bec8f0e8521cab176db7b otherFunctions
## 12: bef41a90b34bec8f0e8521cab176db7b otherFunctions
## 13: bef41a90b34bec8f0e8521cab176db7b otherFunctions
## 14: bef41a90b34bec8f0e8521cab176db7b otherFunctions
## 15: bef41a90b34bec8f0e8521cab176db7b otherFunctions
## 16: bef41a90b34bec8f0e8521cab176db7b otherFunctions
## 17: bef41a90b34bec8f0e8521cab176db7b otherFunctions
## 18: bef41a90b34bec8f0e8521cab176db7b otherFunctions
## 19: bef41a90b34bec8f0e8521cab176db7b otherFunctions
## 20: bef41a90b34bec8f0e8521cab176db7b      preDigest
## 21: bef41a90b34bec8f0e8521cab176db7b      preDigest
## 22: c5ef60c8f6e14c46c83615fbdf9caa93         format
## 23: c5ef60c8f6e14c46c83615fbdf9caa93           name
## 24: c5ef60c8f6e14c46c83615fbdf9caa93          class
## 25: c5ef60c8f6e14c46c83615fbdf9caa93           date
## 26: c5ef60c8f6e14c46c83615fbdf9caa93        cacheId
## 27: c5ef60c8f6e14c46c83615fbdf9caa93     objectName
## 28: c5ef60c8f6e14c46c83615fbdf9caa93       function
## 29: c5ef60c8f6e14c46c83615fbdf9caa93    object.size
## 30: c5ef60c8f6e14c46c83615fbdf9caa93       accessed
## 31: c5ef60c8f6e14c46c83615fbdf9caa93 otherFunctions
## 32: c5ef60c8f6e14c46c83615fbdf9caa93 otherFunctions
## 33: c5ef60c8f6e14c46c83615fbdf9caa93 otherFunctions
## 34: c5ef60c8f6e14c46c83615fbdf9caa93 otherFunctions
## 35: c5ef60c8f6e14c46c83615fbdf9caa93 otherFunctions
## 36: c5ef60c8f6e14c46c83615fbdf9caa93 otherFunctions
## 37: c5ef60c8f6e14c46c83615fbdf9caa93 otherFunctions
## 38: c5ef60c8f6e14c46c83615fbdf9caa93 otherFunctions
## 39: c5ef60c8f6e14c46c83615fbdf9caa93 otherFunctions
## 40: c5ef60c8f6e14c46c83615fbdf9caa93 otherFunctions
## 41: c5ef60c8f6e14c46c83615fbdf9caa93      preDigest
## 42: c5ef60c8f6e14c46c83615fbdf9caa93      preDigest
##                             artifact         tagKey
##                             tagValue         createdDate
##  1:                              rda 2019-03-18 10:09:09
##  2: bef41a90b34bec8f0e8521cab176db7b 2019-03-18 10:09:09
##  3:                          numeric 2019-03-18 10:09:09
##  4:              2019-03-18 10:09:09 2019-03-18 10:09:09
##  5:                 3aef38d1fc02aee5 2019-03-18 10:09:09
##  6:                                a 2019-03-18 10:09:09
##  7:                            runif 2019-03-18 10:09:09
##  8:                             1008 2019-03-18 10:09:09
##  9:              2019-03-18 10:09:09 2019-03-18 10:09:09
## 10:                 vweave_rmarkdown 2019-03-18 10:09:09
## 11:                     process_file 2019-03-18 10:09:09
## 12:                    process_group 2019-03-18 10:09:09
## 13:              process_group.block 2019-03-18 10:09:09
## 14:                       call_block 2019-03-18 10:09:09
## 15:                       block_exec 2019-03-18 10:09:09
## 16:                           in_dir 2019-03-18 10:09:09
## 17:                        timing_fn 2019-03-18 10:09:09
## 18:                           handle 2019-03-18 10:09:09
## 19:                      withVisible 2019-03-18 10:09:09
## 20:               n:7eef4eae85fd9229 2019-03-18 10:09:09
## 21:            .FUN:881ec847b7161f3c 2019-03-18 10:09:09
## 22:                              rda 2019-03-18 10:09:09
## 23: c5ef60c8f6e14c46c83615fbdf9caa93 2019-03-18 10:09:09
## 24:                          numeric 2019-03-18 10:09:09
## 25:              2019-03-18 10:09:09 2019-03-18 10:09:09
## 26:                 f7bee22047b8d0c1 2019-03-18 10:09:09
## 27:                                b 2019-03-18 10:09:09
## 28:                            rnorm 2019-03-18 10:09:09
## 29:                             1008 2019-03-18 10:09:09
## 30:              2019-03-18 10:09:09 2019-03-18 10:09:09
## 31:                 vweave_rmarkdown 2019-03-18 10:09:09
## 32:                     process_file 2019-03-18 10:09:09
## 33:                    process_group 2019-03-18 10:09:09
## 34:              process_group.block 2019-03-18 10:09:09
## 35:                       call_block 2019-03-18 10:09:09
## 36:                       block_exec 2019-03-18 10:09:09
## 37:                           in_dir 2019-03-18 10:09:09
## 38:                        timing_fn 2019-03-18 10:09:09
## 39:                           handle 2019-03-18 10:09:09
## 40:                      withVisible 2019-03-18 10:09:09
## 41:               n:7eef4eae85fd9229 2019-03-18 10:09:09
## 42:            .FUN:4f604aa46882b368 2019-03-18 10:09:09
##                             tagValue         createdDate</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># show objects that are both runif and rnorm</span>
<span class="co"># (i.e., none in this case, because objecs are either or, not both)</span>
<span class="kw">showCache</span>(tmpDir, <span class="dt">userTags =</span> <span class="kw">c</span>(<span class="st">&quot;runif&quot;</span>, <span class="st">&quot;rnorm&quot;</span>)) ## empty</code></pre></div>
<pre><code>## Cache size:</code></pre>
<pre><code>##   Total (including Rasters): 504 bytes</code></pre>
<pre><code>##   Selected objects (not including Rasters): 0 bytes</code></pre>
<pre><code>## Empty data.table (0 rows) of 4 cols: artifact,tagKey,tagValue,createdDate</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># show objects that are either runif or rnorm (&quot;or&quot; search)</span>
<span class="kw">showCache</span>(tmpDir, <span class="dt">userTags =</span> <span class="st">&quot;runif|rnorm&quot;</span>)</code></pre></div>
<pre><code>## Cache size:</code></pre>
<pre><code>##   Total (including Rasters): 504 bytes</code></pre>
<pre><code>##   Selected objects (not including Rasters): 504 bytes</code></pre>
<pre><code>##                             artifact         tagKey
##  1: bef41a90b34bec8f0e8521cab176db7b         format
##  2: bef41a90b34bec8f0e8521cab176db7b           name
##  3: bef41a90b34bec8f0e8521cab176db7b          class
##  4: bef41a90b34bec8f0e8521cab176db7b           date
##  5: bef41a90b34bec8f0e8521cab176db7b        cacheId
##  6: bef41a90b34bec8f0e8521cab176db7b     objectName
##  7: bef41a90b34bec8f0e8521cab176db7b       function
##  8: bef41a90b34bec8f0e8521cab176db7b    object.size
##  9: bef41a90b34bec8f0e8521cab176db7b       accessed
## 10: bef41a90b34bec8f0e8521cab176db7b otherFunctions
## 11: bef41a90b34bec8f0e8521cab176db7b otherFunctions
## 12: bef41a90b34bec8f0e8521cab176db7b otherFunctions
## 13: bef41a90b34bec8f0e8521cab176db7b otherFunctions
## 14: bef41a90b34bec8f0e8521cab176db7b otherFunctions
## 15: bef41a90b34bec8f0e8521cab176db7b otherFunctions
## 16: bef41a90b34bec8f0e8521cab176db7b otherFunctions
## 17: bef41a90b34bec8f0e8521cab176db7b otherFunctions
## 18: bef41a90b34bec8f0e8521cab176db7b otherFunctions
## 19: bef41a90b34bec8f0e8521cab176db7b otherFunctions
## 20: bef41a90b34bec8f0e8521cab176db7b      preDigest
## 21: bef41a90b34bec8f0e8521cab176db7b      preDigest
## 22: c5ef60c8f6e14c46c83615fbdf9caa93         format
## 23: c5ef60c8f6e14c46c83615fbdf9caa93           name
## 24: c5ef60c8f6e14c46c83615fbdf9caa93          class
## 25: c5ef60c8f6e14c46c83615fbdf9caa93           date
## 26: c5ef60c8f6e14c46c83615fbdf9caa93        cacheId
## 27: c5ef60c8f6e14c46c83615fbdf9caa93     objectName
## 28: c5ef60c8f6e14c46c83615fbdf9caa93       function
## 29: c5ef60c8f6e14c46c83615fbdf9caa93    object.size
## 30: c5ef60c8f6e14c46c83615fbdf9caa93       accessed
## 31: c5ef60c8f6e14c46c83615fbdf9caa93 otherFunctions
## 32: c5ef60c8f6e14c46c83615fbdf9caa93 otherFunctions
## 33: c5ef60c8f6e14c46c83615fbdf9caa93 otherFunctions
## 34: c5ef60c8f6e14c46c83615fbdf9caa93 otherFunctions
## 35: c5ef60c8f6e14c46c83615fbdf9caa93 otherFunctions
## 36: c5ef60c8f6e14c46c83615fbdf9caa93 otherFunctions
## 37: c5ef60c8f6e14c46c83615fbdf9caa93 otherFunctions
## 38: c5ef60c8f6e14c46c83615fbdf9caa93 otherFunctions
## 39: c5ef60c8f6e14c46c83615fbdf9caa93 otherFunctions
## 40: c5ef60c8f6e14c46c83615fbdf9caa93 otherFunctions
## 41: c5ef60c8f6e14c46c83615fbdf9caa93      preDigest
## 42: c5ef60c8f6e14c46c83615fbdf9caa93      preDigest
##                             artifact         tagKey
##                             tagValue         createdDate
##  1:                              rda 2019-03-18 10:09:09
##  2: bef41a90b34bec8f0e8521cab176db7b 2019-03-18 10:09:09
##  3:                          numeric 2019-03-18 10:09:09
##  4:              2019-03-18 10:09:09 2019-03-18 10:09:09
##  5:                 3aef38d1fc02aee5 2019-03-18 10:09:09
##  6:                                a 2019-03-18 10:09:09
##  7:                            runif 2019-03-18 10:09:09
##  8:                             1008 2019-03-18 10:09:09
##  9:              2019-03-18 10:09:09 2019-03-18 10:09:09
## 10:                 vweave_rmarkdown 2019-03-18 10:09:09
## 11:                     process_file 2019-03-18 10:09:09
## 12:                    process_group 2019-03-18 10:09:09
## 13:              process_group.block 2019-03-18 10:09:09
## 14:                       call_block 2019-03-18 10:09:09
## 15:                       block_exec 2019-03-18 10:09:09
## 16:                           in_dir 2019-03-18 10:09:09
## 17:                        timing_fn 2019-03-18 10:09:09
## 18:                           handle 2019-03-18 10:09:09
## 19:                      withVisible 2019-03-18 10:09:09
## 20:               n:7eef4eae85fd9229 2019-03-18 10:09:09
## 21:            .FUN:881ec847b7161f3c 2019-03-18 10:09:09
## 22:                              rda 2019-03-18 10:09:09
## 23: c5ef60c8f6e14c46c83615fbdf9caa93 2019-03-18 10:09:09
## 24:                          numeric 2019-03-18 10:09:09
## 25:              2019-03-18 10:09:09 2019-03-18 10:09:09
## 26:                 f7bee22047b8d0c1 2019-03-18 10:09:09
## 27:                                b 2019-03-18 10:09:09
## 28:                            rnorm 2019-03-18 10:09:09
## 29:                             1008 2019-03-18 10:09:09
## 30:              2019-03-18 10:09:09 2019-03-18 10:09:09
## 31:                 vweave_rmarkdown 2019-03-18 10:09:09
## 32:                     process_file 2019-03-18 10:09:09
## 33:                    process_group 2019-03-18 10:09:09
## 34:              process_group.block 2019-03-18 10:09:09
## 35:                       call_block 2019-03-18 10:09:09
## 36:                       block_exec 2019-03-18 10:09:09
## 37:                           in_dir 2019-03-18 10:09:09
## 38:                        timing_fn 2019-03-18 10:09:09
## 39:                           handle 2019-03-18 10:09:09
## 40:                      withVisible 2019-03-18 10:09:09
## 41:               n:7eef4eae85fd9229 2019-03-18 10:09:09
## 42:            .FUN:4f604aa46882b368 2019-03-18 10:09:09
##                             tagValue         createdDate</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># keep only objects that are either runif or rnorm (&quot;or&quot; search)</span>
<span class="kw">keepCache</span>(tmpDir, <span class="dt">userTags =</span> <span class="st">&quot;runif|rnorm&quot;</span>, <span class="dt">ask =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>## Cache size:</code></pre>
<pre><code>##   Total (including Rasters): 504 bytes</code></pre>
<pre><code>##   Selected objects (not including Rasters): 504 bytes</code></pre>
<pre><code>##                             artifact         tagKey
##  1: bef41a90b34bec8f0e8521cab176db7b         format
##  2: bef41a90b34bec8f0e8521cab176db7b           name
##  3: bef41a90b34bec8f0e8521cab176db7b          class
##  4: bef41a90b34bec8f0e8521cab176db7b           date
##  5: bef41a90b34bec8f0e8521cab176db7b        cacheId
##  6: bef41a90b34bec8f0e8521cab176db7b     objectName
##  7: bef41a90b34bec8f0e8521cab176db7b       function
##  8: bef41a90b34bec8f0e8521cab176db7b    object.size
##  9: bef41a90b34bec8f0e8521cab176db7b       accessed
## 10: bef41a90b34bec8f0e8521cab176db7b otherFunctions
## 11: bef41a90b34bec8f0e8521cab176db7b otherFunctions
## 12: bef41a90b34bec8f0e8521cab176db7b otherFunctions
## 13: bef41a90b34bec8f0e8521cab176db7b otherFunctions
## 14: bef41a90b34bec8f0e8521cab176db7b otherFunctions
## 15: bef41a90b34bec8f0e8521cab176db7b otherFunctions
## 16: bef41a90b34bec8f0e8521cab176db7b otherFunctions
## 17: bef41a90b34bec8f0e8521cab176db7b otherFunctions
## 18: bef41a90b34bec8f0e8521cab176db7b otherFunctions
## 19: bef41a90b34bec8f0e8521cab176db7b otherFunctions
## 20: bef41a90b34bec8f0e8521cab176db7b      preDigest
## 21: bef41a90b34bec8f0e8521cab176db7b      preDigest
## 22: c5ef60c8f6e14c46c83615fbdf9caa93         format
## 23: c5ef60c8f6e14c46c83615fbdf9caa93           name
## 24: c5ef60c8f6e14c46c83615fbdf9caa93          class
## 25: c5ef60c8f6e14c46c83615fbdf9caa93           date
## 26: c5ef60c8f6e14c46c83615fbdf9caa93        cacheId
## 27: c5ef60c8f6e14c46c83615fbdf9caa93     objectName
## 28: c5ef60c8f6e14c46c83615fbdf9caa93       function
## 29: c5ef60c8f6e14c46c83615fbdf9caa93    object.size
## 30: c5ef60c8f6e14c46c83615fbdf9caa93       accessed
## 31: c5ef60c8f6e14c46c83615fbdf9caa93 otherFunctions
## 32: c5ef60c8f6e14c46c83615fbdf9caa93 otherFunctions
## 33: c5ef60c8f6e14c46c83615fbdf9caa93 otherFunctions
## 34: c5ef60c8f6e14c46c83615fbdf9caa93 otherFunctions
## 35: c5ef60c8f6e14c46c83615fbdf9caa93 otherFunctions
## 36: c5ef60c8f6e14c46c83615fbdf9caa93 otherFunctions
## 37: c5ef60c8f6e14c46c83615fbdf9caa93 otherFunctions
## 38: c5ef60c8f6e14c46c83615fbdf9caa93 otherFunctions
## 39: c5ef60c8f6e14c46c83615fbdf9caa93 otherFunctions
## 40: c5ef60c8f6e14c46c83615fbdf9caa93 otherFunctions
## 41: c5ef60c8f6e14c46c83615fbdf9caa93      preDigest
## 42: c5ef60c8f6e14c46c83615fbdf9caa93      preDigest
##                             artifact         tagKey
##                             tagValue         createdDate
##  1:                              rda 2019-03-18 10:09:09
##  2: bef41a90b34bec8f0e8521cab176db7b 2019-03-18 10:09:09
##  3:                          numeric 2019-03-18 10:09:09
##  4:              2019-03-18 10:09:09 2019-03-18 10:09:09
##  5:                 3aef38d1fc02aee5 2019-03-18 10:09:09
##  6:                                a 2019-03-18 10:09:09
##  7:                            runif 2019-03-18 10:09:09
##  8:                             1008 2019-03-18 10:09:09
##  9:              2019-03-18 10:09:09 2019-03-18 10:09:09
## 10:                 vweave_rmarkdown 2019-03-18 10:09:09
## 11:                     process_file 2019-03-18 10:09:09
## 12:                    process_group 2019-03-18 10:09:09
## 13:              process_group.block 2019-03-18 10:09:09
## 14:                       call_block 2019-03-18 10:09:09
## 15:                       block_exec 2019-03-18 10:09:09
## 16:                           in_dir 2019-03-18 10:09:09
## 17:                        timing_fn 2019-03-18 10:09:09
## 18:                           handle 2019-03-18 10:09:09
## 19:                      withVisible 2019-03-18 10:09:09
## 20:               n:7eef4eae85fd9229 2019-03-18 10:09:09
## 21:            .FUN:881ec847b7161f3c 2019-03-18 10:09:09
## 22:                              rda 2019-03-18 10:09:09
## 23: c5ef60c8f6e14c46c83615fbdf9caa93 2019-03-18 10:09:09
## 24:                          numeric 2019-03-18 10:09:09
## 25:              2019-03-18 10:09:09 2019-03-18 10:09:09
## 26:                 f7bee22047b8d0c1 2019-03-18 10:09:09
## 27:                                b 2019-03-18 10:09:09
## 28:                            rnorm 2019-03-18 10:09:09
## 29:                             1008 2019-03-18 10:09:09
## 30:              2019-03-18 10:09:09 2019-03-18 10:09:09
## 31:                 vweave_rmarkdown 2019-03-18 10:09:09
## 32:                     process_file 2019-03-18 10:09:09
## 33:                    process_group 2019-03-18 10:09:09
## 34:              process_group.block 2019-03-18 10:09:09
## 35:                       call_block 2019-03-18 10:09:09
## 36:                       block_exec 2019-03-18 10:09:09
## 37:                           in_dir 2019-03-18 10:09:09
## 38:                        timing_fn 2019-03-18 10:09:09
## 39:                           handle 2019-03-18 10:09:09
## 40:                      withVisible 2019-03-18 10:09:09
## 41:               n:7eef4eae85fd9229 2019-03-18 10:09:09
## 42:            .FUN:4f604aa46882b368 2019-03-18 10:09:09
##                             tagValue         createdDate</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">clearCache</span>(tmpDir, <span class="dt">ask =</span> <span class="ot">FALSE</span>)</code></pre></div>
</div>
<div id="example-5-using-caching-to-speed-up-rerunning-expensive-computations" class="section level2">
<h2><span class="header-section-number">1.8</span> Example 5: using caching to speed up rerunning expensive computations</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ras &lt;-<span class="st"> </span><span class="kw">raster</span>(<span class="kw">extent</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">5</span>), <span class="dt">res =</span> <span class="dv">1</span>,
              <span class="dt">vals =</span> <span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>, <span class="dt">size =</span> <span class="dv">25</span>),
              <span class="dt">crs =</span> <span class="st">&quot;+proj=lcc +lat_1=48 +lat_2=33 +lon_0=-100 +ellps=WGS84&quot;</span>)

<span class="co"># A slow operation, like GIS operation</span>
notCached &lt;-<span class="st"> </span><span class="kw">suppressWarnings</span>(
  <span class="co"># project raster generates warnings when run non-interactively</span>
  <span class="kw">projectRaster</span>(ras, <span class="dt">crs =</span> <span class="kw">crs</span>(ras), <span class="dt">res =</span> <span class="dv">5</span>, <span class="dt">cacheRepo =</span> tmpDir)
)

cached &lt;-<span class="st"> </span><span class="kw">suppressWarnings</span>(
  <span class="co"># project raster generates warnings when run non-interactively</span>
  <span class="co"># using quote works also</span>
  <span class="kw">Cache</span>(projectRaster, ras, <span class="dt">crs =</span> <span class="kw">crs</span>(ras), <span class="dt">res =</span> <span class="dv">5</span>, <span class="dt">cacheRepo =</span> tmpDir)
)

<span class="co"># second time is much faster</span>
reRun &lt;-<span class="st"> </span><span class="kw">suppressWarnings</span>(
  <span class="co"># project raster generates warnings when run non-interactively</span>
  <span class="kw">Cache</span>(projectRaster, ras, <span class="dt">crs =</span> <span class="kw">crs</span>(ras), <span class="dt">res =</span> <span class="dv">5</span>, <span class="dt">cacheRepo =</span> tmpDir)
)</code></pre></div>
<pre><code>##   loading cached result from previous projectRaster call, adding to memoised copy</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># recovered cached version is same as non-cached version</span>
<span class="kw">all.equal</span>(notCached, reRun) ## TRUE</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="nested-caching" class="section level2">
<h2><span class="header-section-number">1.9</span> Nested Caching</h2>
<p>Nested caching, which is when Caching of a function occurs inside an outer function, which is itself cached. This is a critical element to working within a reproducible work flow. It is not enough during development to cache flat code chunks, as there will be many levels of “slow” functions. Ideally, at all points in a development cycle, it should be possible to get to any line of code starting from the very initial steps, running through everything up to that point, in less that 1 second. If the workflow can be kept very fast like this, then there is a guarantee that it will work at any point.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">##########################
## Nested Caching
<span class="co"># Make 2 functions</span>
inner &lt;-<span class="st"> </span><span class="cf">function</span>(mean) {
  d &lt;-<span class="st"> </span><span class="dv">1</span>
  <span class="kw">Cache</span>(rnorm, <span class="dt">n =</span> <span class="dv">3</span>, <span class="dt">mean =</span> mean)
}
outer &lt;-<span class="st"> </span><span class="cf">function</span>(n) {
  <span class="kw">Cache</span>(inner, <span class="fl">0.1</span>, <span class="dt">cacheRepo =</span> tmpdir2)
}

<span class="co"># make 2 different cache paths</span>
tmpdir1 &lt;-<span class="st"> </span><span class="kw">file.path</span>(<span class="kw">tempdir</span>(), <span class="st">&quot;first&quot;</span>)
tmpdir2 &lt;-<span class="st"> </span><span class="kw">file.path</span>(<span class="kw">tempdir</span>(), <span class="st">&quot;second&quot;</span>)

<span class="co"># Run the Cache ... notOlderThan propagates to all 3 Cache calls,</span>
<span class="co">#   but cacheRepo is tmpdir1 in top level Cache and all nested</span>
<span class="co">#   Cache calls, unless individually overridden ... here inner</span>
<span class="co">#   uses tmpdir2 repository</span>
<span class="kw">Cache</span>(outer, <span class="dt">n =</span> <span class="dv">2</span>, <span class="dt">cacheRepo =</span> tmpdir1, <span class="dt">notOlderThan =</span> <span class="kw">Sys.time</span>())</code></pre></div>
<pre><code>## [1] -0.75133638  0.04503018 -0.26304840
## attr(,&quot;.Cache&quot;)
## attr(,&quot;.Cache&quot;)$newCache
## [1] TRUE
## 
## attr(,&quot;tags&quot;)
## [1] &quot;cacheId:a7af5367c13aba8f&quot;
## attr(,&quot;call&quot;)
## [1] &quot;&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">showCache</span>(tmpdir1) <span class="co"># 2 function calls</span></code></pre></div>
<pre><code>## Cache size:</code></pre>
<pre><code>##   Total (including Rasters): 504 bytes</code></pre>
<pre><code>##   Selected objects (not including Rasters): 504 bytes</code></pre>
<pre><code>##                             artifact         tagKey
##  1: 8f260a8d81a6516296ae665adec5ce31         format
##  2: 8f260a8d81a6516296ae665adec5ce31           name
##  3: 8f260a8d81a6516296ae665adec5ce31          class
##  4: 8f260a8d81a6516296ae665adec5ce31           date
##  5: 8f260a8d81a6516296ae665adec5ce31        cacheId
##  6: 8f260a8d81a6516296ae665adec5ce31       function
##  7: 8f260a8d81a6516296ae665adec5ce31    object.size
##  8: 8f260a8d81a6516296ae665adec5ce31       accessed
##  9: 8f260a8d81a6516296ae665adec5ce31 otherFunctions
## 10: 8f260a8d81a6516296ae665adec5ce31 otherFunctions
## 11: 8f260a8d81a6516296ae665adec5ce31 otherFunctions
## 12: 8f260a8d81a6516296ae665adec5ce31 otherFunctions
## 13: 8f260a8d81a6516296ae665adec5ce31 otherFunctions
## 14: 8f260a8d81a6516296ae665adec5ce31 otherFunctions
## 15: 8f260a8d81a6516296ae665adec5ce31 otherFunctions
## 16: 8f260a8d81a6516296ae665adec5ce31 otherFunctions
## 17: 8f260a8d81a6516296ae665adec5ce31 otherFunctions
## 18: 8f260a8d81a6516296ae665adec5ce31 otherFunctions
## 19: 8f260a8d81a6516296ae665adec5ce31      preDigest
## 20: 8f260a8d81a6516296ae665adec5ce31      preDigest
## 21: 8f260a8d81a6516296ae665adec5ce31      preDigest
## 22: f096da0ebd9f23075e52d4226b81669c         format
## 23: f096da0ebd9f23075e52d4226b81669c           name
## 24: f096da0ebd9f23075e52d4226b81669c          class
## 25: f096da0ebd9f23075e52d4226b81669c           date
## 26: f096da0ebd9f23075e52d4226b81669c        cacheId
## 27: f096da0ebd9f23075e52d4226b81669c       function
## 28: f096da0ebd9f23075e52d4226b81669c    object.size
## 29: f096da0ebd9f23075e52d4226b81669c       accessed
## 30: f096da0ebd9f23075e52d4226b81669c otherFunctions
## 31: f096da0ebd9f23075e52d4226b81669c otherFunctions
## 32: f096da0ebd9f23075e52d4226b81669c otherFunctions
## 33: f096da0ebd9f23075e52d4226b81669c otherFunctions
## 34: f096da0ebd9f23075e52d4226b81669c otherFunctions
## 35: f096da0ebd9f23075e52d4226b81669c otherFunctions
## 36: f096da0ebd9f23075e52d4226b81669c otherFunctions
## 37: f096da0ebd9f23075e52d4226b81669c otherFunctions
## 38: f096da0ebd9f23075e52d4226b81669c otherFunctions
## 39: f096da0ebd9f23075e52d4226b81669c otherFunctions
## 40: f096da0ebd9f23075e52d4226b81669c      preDigest
## 41: f096da0ebd9f23075e52d4226b81669c      preDigest
##                             artifact         tagKey
##                             tagValue         createdDate
##  1:                              rda 2019-03-18 10:09:09
##  2: 8f260a8d81a6516296ae665adec5ce31 2019-03-18 10:09:09
##  3:                          numeric 2019-03-18 10:09:09
##  4:              2019-03-18 10:09:09 2019-03-18 10:09:09
##  5:                 4ac2b7c0f42d1e46 2019-03-18 10:09:09
##  6:                            rnorm 2019-03-18 10:09:09
##  7:                             1008 2019-03-18 10:09:09
##  8:              2019-03-18 10:09:09 2019-03-18 10:09:09
##  9:                 vweave_rmarkdown 2019-03-18 10:09:09
## 10:                     process_file 2019-03-18 10:09:09
## 11:                    process_group 2019-03-18 10:09:09
## 12:              process_group.block 2019-03-18 10:09:09
## 13:                       call_block 2019-03-18 10:09:09
## 14:                       block_exec 2019-03-18 10:09:09
## 15:                           in_dir 2019-03-18 10:09:09
## 16:                        timing_fn 2019-03-18 10:09:09
## 17:                           handle 2019-03-18 10:09:09
## 18:                      withVisible 2019-03-18 10:09:09
## 19:               n:7f12988bd88a0fb8 2019-03-18 10:09:09
## 20:            mean:22413394efd9f6a3 2019-03-18 10:09:09
## 21:            .FUN:4f604aa46882b368 2019-03-18 10:09:09
## 22:                              rda 2019-03-18 10:09:09
## 23: f096da0ebd9f23075e52d4226b81669c 2019-03-18 10:09:09
## 24:                          numeric 2019-03-18 10:09:09
## 25:              2019-03-18 10:09:09 2019-03-18 10:09:09
## 26:                 a7af5367c13aba8f 2019-03-18 10:09:09
## 27:                            outer 2019-03-18 10:09:09
## 28:                             1008 2019-03-18 10:09:09
## 29:              2019-03-18 10:09:09 2019-03-18 10:09:09
## 30:                 vweave_rmarkdown 2019-03-18 10:09:09
## 31:                     process_file 2019-03-18 10:09:09
## 32:                    process_group 2019-03-18 10:09:09
## 33:              process_group.block 2019-03-18 10:09:09
## 34:                       call_block 2019-03-18 10:09:09
## 35:                       block_exec 2019-03-18 10:09:09
## 36:                           in_dir 2019-03-18 10:09:09
## 37:                        timing_fn 2019-03-18 10:09:09
## 38:                           handle 2019-03-18 10:09:09
## 39:                      withVisible 2019-03-18 10:09:09
## 40:               n:82dc709f2b91918a 2019-03-18 10:09:09
## 41:            .FUN:892a6afc47a63a90 2019-03-18 10:09:09
##                             tagValue         createdDate</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">showCache</span>(tmpdir2) <span class="co"># 1 function call</span></code></pre></div>
<pre><code>## Cache size:</code></pre>
<pre><code>##   Total (including Rasters): 252 bytes</code></pre>
<pre><code>##   Selected objects (not including Rasters): 252 bytes</code></pre>
<pre><code>##                             artifact         tagKey
##  1: 25d8938dcc1e28bc1877bfd21a01b80c         format
##  2: 25d8938dcc1e28bc1877bfd21a01b80c           name
##  3: 25d8938dcc1e28bc1877bfd21a01b80c          class
##  4: 25d8938dcc1e28bc1877bfd21a01b80c           date
##  5: 25d8938dcc1e28bc1877bfd21a01b80c        cacheId
##  6: 25d8938dcc1e28bc1877bfd21a01b80c       function
##  7: 25d8938dcc1e28bc1877bfd21a01b80c    object.size
##  8: 25d8938dcc1e28bc1877bfd21a01b80c       accessed
##  9: 25d8938dcc1e28bc1877bfd21a01b80c otherFunctions
## 10: 25d8938dcc1e28bc1877bfd21a01b80c otherFunctions
## 11: 25d8938dcc1e28bc1877bfd21a01b80c otherFunctions
## 12: 25d8938dcc1e28bc1877bfd21a01b80c otherFunctions
## 13: 25d8938dcc1e28bc1877bfd21a01b80c otherFunctions
## 14: 25d8938dcc1e28bc1877bfd21a01b80c otherFunctions
## 15: 25d8938dcc1e28bc1877bfd21a01b80c otherFunctions
## 16: 25d8938dcc1e28bc1877bfd21a01b80c otherFunctions
## 17: 25d8938dcc1e28bc1877bfd21a01b80c otherFunctions
## 18: 25d8938dcc1e28bc1877bfd21a01b80c otherFunctions
## 19: 25d8938dcc1e28bc1877bfd21a01b80c      preDigest
## 20: 25d8938dcc1e28bc1877bfd21a01b80c      preDigest
##                             tagValue         createdDate
##  1:                              rda 2019-03-18 10:09:09
##  2: 25d8938dcc1e28bc1877bfd21a01b80c 2019-03-18 10:09:09
##  3:                          numeric 2019-03-18 10:09:09
##  4:              2019-03-18 10:09:09 2019-03-18 10:09:09
##  5:                 33ceb4fb525fd08f 2019-03-18 10:09:09
##  6:                            inner 2019-03-18 10:09:09
##  7:                             1008 2019-03-18 10:09:09
##  8:              2019-03-18 10:09:09 2019-03-18 10:09:09
##  9:                 vweave_rmarkdown 2019-03-18 10:09:09
## 10:                     process_file 2019-03-18 10:09:09
## 11:                    process_group 2019-03-18 10:09:09
## 12:              process_group.block 2019-03-18 10:09:09
## 13:                       call_block 2019-03-18 10:09:09
## 14:                       block_exec 2019-03-18 10:09:09
## 15:                           in_dir 2019-03-18 10:09:09
## 16:                        timing_fn 2019-03-18 10:09:09
## 17:                           handle 2019-03-18 10:09:09
## 18:                      withVisible 2019-03-18 10:09:09
## 19:            mean:22413394efd9f6a3 2019-03-18 10:09:09
## 20:            .FUN:87e2c30917a34d25 2019-03-18 10:09:09</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># userTags get appended</span>
<span class="co"># all items have the outer tag propagate, plus inner ones only have inner ones</span>
<span class="kw">clearCache</span>(tmpdir1, <span class="dt">ask =</span> <span class="ot">FALSE</span>)
outerTag &lt;-<span class="st"> &quot;outerTag&quot;</span>
innerTag &lt;-<span class="st"> &quot;innerTag&quot;</span>
inner &lt;-<span class="st"> </span><span class="cf">function</span>(mean) {
  d &lt;-<span class="st"> </span><span class="dv">1</span>
  <span class="kw">Cache</span>(rnorm, <span class="dt">n =</span> <span class="dv">3</span>, <span class="dt">mean =</span> mean, <span class="dt">notOlderThan =</span> <span class="kw">Sys.time</span>() <span class="op">-</span><span class="st"> </span><span class="fl">1e5</span>, <span class="dt">userTags =</span> innerTag)
}
outer &lt;-<span class="st"> </span><span class="cf">function</span>(n) {
  <span class="kw">Cache</span>(inner, <span class="fl">0.1</span>)
}
aa &lt;-<span class="st"> </span><span class="kw">Cache</span>(outer, <span class="dt">n =</span> <span class="dv">2</span>, <span class="dt">cacheRepo =</span> tmpdir1, <span class="dt">userTags =</span> outerTag)
<span class="kw">showCache</span>(tmpdir1) <span class="co"># rnorm function has outerTag and innerTag, inner and outer only have outerTag</span></code></pre></div>
<pre><code>## Cache size:</code></pre>
<pre><code>##   Total (including Rasters): 756 bytes</code></pre>
<pre><code>##   Selected objects (not including Rasters): 756 bytes</code></pre>
<pre><code>##                             artifact         tagKey
##  1: 0eeb592d7d32caa9bb100d48f20d9645         format
##  2: 0eeb592d7d32caa9bb100d48f20d9645           name
##  3: 0eeb592d7d32caa9bb100d48f20d9645          class
##  4: 0eeb592d7d32caa9bb100d48f20d9645           date
##  5: 0eeb592d7d32caa9bb100d48f20d9645        cacheId
##  6: 0eeb592d7d32caa9bb100d48f20d9645       outerTag
##  7: 0eeb592d7d32caa9bb100d48f20d9645       function
##  8: 0eeb592d7d32caa9bb100d48f20d9645    object.size
##  9: 0eeb592d7d32caa9bb100d48f20d9645       accessed
## 10: 0eeb592d7d32caa9bb100d48f20d9645 otherFunctions
## 11: 0eeb592d7d32caa9bb100d48f20d9645 otherFunctions
## 12: 0eeb592d7d32caa9bb100d48f20d9645 otherFunctions
## 13: 0eeb592d7d32caa9bb100d48f20d9645 otherFunctions
## 14: 0eeb592d7d32caa9bb100d48f20d9645 otherFunctions
## 15: 0eeb592d7d32caa9bb100d48f20d9645 otherFunctions
## 16: 0eeb592d7d32caa9bb100d48f20d9645 otherFunctions
## 17: 0eeb592d7d32caa9bb100d48f20d9645 otherFunctions
## 18: 0eeb592d7d32caa9bb100d48f20d9645 otherFunctions
## 19: 0eeb592d7d32caa9bb100d48f20d9645 otherFunctions
## 20: 0eeb592d7d32caa9bb100d48f20d9645      preDigest
## 21: 0eeb592d7d32caa9bb100d48f20d9645      preDigest
## 22: 338c2e0c6df21a9d0979f4f2dfe3eb9f         format
## 23: 338c2e0c6df21a9d0979f4f2dfe3eb9f           name
## 24: 338c2e0c6df21a9d0979f4f2dfe3eb9f          class
## 25: 338c2e0c6df21a9d0979f4f2dfe3eb9f           date
## 26: 338c2e0c6df21a9d0979f4f2dfe3eb9f        cacheId
## 27: 338c2e0c6df21a9d0979f4f2dfe3eb9f       innerTag
## 28: 338c2e0c6df21a9d0979f4f2dfe3eb9f       outerTag
## 29: 338c2e0c6df21a9d0979f4f2dfe3eb9f       function
## 30: 338c2e0c6df21a9d0979f4f2dfe3eb9f    object.size
## 31: 338c2e0c6df21a9d0979f4f2dfe3eb9f       accessed
## 32: 338c2e0c6df21a9d0979f4f2dfe3eb9f otherFunctions
## 33: 338c2e0c6df21a9d0979f4f2dfe3eb9f otherFunctions
## 34: 338c2e0c6df21a9d0979f4f2dfe3eb9f otherFunctions
## 35: 338c2e0c6df21a9d0979f4f2dfe3eb9f otherFunctions
## 36: 338c2e0c6df21a9d0979f4f2dfe3eb9f otherFunctions
## 37: 338c2e0c6df21a9d0979f4f2dfe3eb9f otherFunctions
## 38: 338c2e0c6df21a9d0979f4f2dfe3eb9f otherFunctions
## 39: 338c2e0c6df21a9d0979f4f2dfe3eb9f otherFunctions
## 40: 338c2e0c6df21a9d0979f4f2dfe3eb9f otherFunctions
## 41: 338c2e0c6df21a9d0979f4f2dfe3eb9f otherFunctions
## 42: 338c2e0c6df21a9d0979f4f2dfe3eb9f      preDigest
## 43: 338c2e0c6df21a9d0979f4f2dfe3eb9f      preDigest
## 44: 338c2e0c6df21a9d0979f4f2dfe3eb9f      preDigest
## 45: 542378c53deeb0dcc1a068e2a8fe23eb         format
## 46: 542378c53deeb0dcc1a068e2a8fe23eb           name
## 47: 542378c53deeb0dcc1a068e2a8fe23eb          class
## 48: 542378c53deeb0dcc1a068e2a8fe23eb           date
## 49: 542378c53deeb0dcc1a068e2a8fe23eb        cacheId
## 50: 542378c53deeb0dcc1a068e2a8fe23eb       outerTag
## 51: 542378c53deeb0dcc1a068e2a8fe23eb       function
## 52: 542378c53deeb0dcc1a068e2a8fe23eb    object.size
## 53: 542378c53deeb0dcc1a068e2a8fe23eb       accessed
## 54: 542378c53deeb0dcc1a068e2a8fe23eb otherFunctions
## 55: 542378c53deeb0dcc1a068e2a8fe23eb otherFunctions
## 56: 542378c53deeb0dcc1a068e2a8fe23eb otherFunctions
## 57: 542378c53deeb0dcc1a068e2a8fe23eb otherFunctions
## 58: 542378c53deeb0dcc1a068e2a8fe23eb otherFunctions
## 59: 542378c53deeb0dcc1a068e2a8fe23eb otherFunctions
## 60: 542378c53deeb0dcc1a068e2a8fe23eb otherFunctions
## 61: 542378c53deeb0dcc1a068e2a8fe23eb otherFunctions
## 62: 542378c53deeb0dcc1a068e2a8fe23eb otherFunctions
## 63: 542378c53deeb0dcc1a068e2a8fe23eb otherFunctions
## 64: 542378c53deeb0dcc1a068e2a8fe23eb      preDigest
## 65: 542378c53deeb0dcc1a068e2a8fe23eb      preDigest
##                             artifact         tagKey
##                             tagValue         createdDate
##  1:                              rda 2019-03-18 10:09:10
##  2: 0eeb592d7d32caa9bb100d48f20d9645 2019-03-18 10:09:10
##  3:                          numeric 2019-03-18 10:09:10
##  4:              2019-03-18 10:09:10 2019-03-18 10:09:10
##  5:                 88a34e1d033329e5 2019-03-18 10:09:10
##  6:                         outerTag 2019-03-18 10:09:10
##  7:                            outer 2019-03-18 10:09:10
##  8:                             1008 2019-03-18 10:09:10
##  9:              2019-03-18 10:09:10 2019-03-18 10:09:10
## 10:                 vweave_rmarkdown 2019-03-18 10:09:10
## 11:                     process_file 2019-03-18 10:09:10
## 12:                    process_group 2019-03-18 10:09:10
## 13:              process_group.block 2019-03-18 10:09:10
## 14:                       call_block 2019-03-18 10:09:10
## 15:                       block_exec 2019-03-18 10:09:10
## 16:                           in_dir 2019-03-18 10:09:10
## 17:                        timing_fn 2019-03-18 10:09:10
## 18:                           handle 2019-03-18 10:09:10
## 19:                      withVisible 2019-03-18 10:09:10
## 20:               n:82dc709f2b91918a 2019-03-18 10:09:10
## 21:            .FUN:5f06fb5fbffe9e3b 2019-03-18 10:09:10
## 22:                              rda 2019-03-18 10:09:09
## 23: 338c2e0c6df21a9d0979f4f2dfe3eb9f 2019-03-18 10:09:09
## 24:                          numeric 2019-03-18 10:09:09
## 25:              2019-03-18 10:09:09 2019-03-18 10:09:09
## 26:                 4ac2b7c0f42d1e46 2019-03-18 10:09:09
## 27:                         innerTag 2019-03-18 10:09:09
## 28:                         outerTag 2019-03-18 10:09:09
## 29:                            rnorm 2019-03-18 10:09:09
## 30:                             1008 2019-03-18 10:09:09
## 31:              2019-03-18 10:09:09 2019-03-18 10:09:09
## 32:                 vweave_rmarkdown 2019-03-18 10:09:09
## 33:                     process_file 2019-03-18 10:09:09
## 34:                    process_group 2019-03-18 10:09:09
## 35:              process_group.block 2019-03-18 10:09:09
## 36:                       call_block 2019-03-18 10:09:09
## 37:                       block_exec 2019-03-18 10:09:09
## 38:                           in_dir 2019-03-18 10:09:09
## 39:                        timing_fn 2019-03-18 10:09:09
## 40:                           handle 2019-03-18 10:09:09
## 41:                      withVisible 2019-03-18 10:09:09
## 42:               n:7f12988bd88a0fb8 2019-03-18 10:09:09
## 43:            mean:22413394efd9f6a3 2019-03-18 10:09:09
## 44:            .FUN:4f604aa46882b368 2019-03-18 10:09:09
## 45:                              rda 2019-03-18 10:09:09
## 46: 542378c53deeb0dcc1a068e2a8fe23eb 2019-03-18 10:09:09
## 47:                          numeric 2019-03-18 10:09:09
## 48:              2019-03-18 10:09:09 2019-03-18 10:09:09
## 49:                 b06af03d5a73dc7d 2019-03-18 10:09:09
## 50:                         outerTag 2019-03-18 10:09:09
## 51:                            inner 2019-03-18 10:09:09
## 52:                             1008 2019-03-18 10:09:09
## 53:              2019-03-18 10:09:09 2019-03-18 10:09:09
## 54:                 vweave_rmarkdown 2019-03-18 10:09:09
## 55:                     process_file 2019-03-18 10:09:09
## 56:                    process_group 2019-03-18 10:09:09
## 57:              process_group.block 2019-03-18 10:09:09
## 58:                       call_block 2019-03-18 10:09:10
## 59:                       block_exec 2019-03-18 10:09:10
## 60:                           in_dir 2019-03-18 10:09:10
## 61:                        timing_fn 2019-03-18 10:09:10
## 62:                           handle 2019-03-18 10:09:10
## 63:                      withVisible 2019-03-18 10:09:10
## 64:            mean:22413394efd9f6a3 2019-03-18 10:09:10
## 65:            .FUN:7ad10bc1ae528d8c 2019-03-18 10:09:10
##                             tagValue         createdDate</code></pre>
</div>
<div id="cacheid" class="section level2">
<h2><span class="header-section-number">1.10</span> cacheId</h2>
<p>Sometimes, it is not absolutely desirable to maintain the work flow intact because changes that are irrelevant to the analysis, such as changing messages sent to a user, may be changed, without a desire to rerun functions. The <code>cacheId</code> argument is for this. Once a piece of code is run, then the <code>cacheId</code> can be manually extracted (it is reported at the end of a Cache call) and manually placed in the code, passed in as, say, <code>cacheId = &quot;ad184ce64541972b50afd8e7b75f821b&quot;</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">### cacheId
<span class="kw">set.seed</span>(<span class="dv">1</span>)
<span class="kw">Cache</span>(rnorm, <span class="dv">1</span>, <span class="dt">cacheRepo =</span> tmpdir1)</code></pre></div>
<pre><code>## [1] -0.6264538
## attr(,&quot;.Cache&quot;)
## attr(,&quot;.Cache&quot;)$newCache
## [1] TRUE
## 
## attr(,&quot;tags&quot;)
## [1] &quot;cacheId:7072c305d8c69df0&quot;
## attr(,&quot;call&quot;)
## [1] &quot;&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># manually look at output attribute which shows cacheId: ad184ce64541972b50afd8e7b75f821b</span>
<span class="kw">Cache</span>(rnorm, <span class="dv">1</span>, <span class="dt">cacheRepo =</span> tmpdir1, <span class="dt">cacheId =</span> <span class="st">&quot;ad184ce64541972b50afd8e7b75f821b&quot;</span>) <span class="co"># same value</span></code></pre></div>
<pre><code>## cacheId is not same as calculated hash. Manually searching for cacheId:ad184ce64541972b50afd8e7b75f821b</code></pre>
<pre><code>## [1] 0.1836433
## attr(,&quot;.Cache&quot;)
## attr(,&quot;.Cache&quot;)$newCache
## [1] TRUE
## 
## attr(,&quot;tags&quot;)
## [1] &quot;cacheId:ad184ce64541972b50afd8e7b75f821b&quot;
## attr(,&quot;call&quot;)
## [1] &quot;&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># override even with different inputs:</span>
<span class="kw">Cache</span>(rnorm, <span class="dv">2</span>, <span class="dt">cacheRepo =</span> tmpdir1, <span class="dt">cacheId =</span> <span class="st">&quot;ad184ce64541972b50afd8e7b75f821b&quot;</span>)</code></pre></div>
<pre><code>## cacheId is not same as calculated hash. Manually searching for cacheId:ad184ce64541972b50afd8e7b75f821b</code></pre>
<pre><code>##   loading cached result from previous rnorm call, adding to memoised copy</code></pre>
<pre><code>## [1] 0.1836433
## attr(,&quot;.Cache&quot;)
## attr(,&quot;.Cache&quot;)$newCache
## [1] FALSE
## 
## attr(,&quot;tags&quot;)
## [1] &quot;cacheId:ad184ce64541972b50afd8e7b75f821b&quot;
## attr(,&quot;call&quot;)
## [1] &quot;&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## cleanup
<span class="kw">unlink</span>(<span class="kw">c</span>(<span class="st">&quot;filename.rda&quot;</span>, <span class="st">&quot;filename1.rda&quot;</span>))</code></pre></div>
</div>
<div id="working-with-the-cache-manually" class="section level2">
<h2><span class="header-section-number">1.11</span> Working with the Cache manually</h2>
<p>Since the cache is simply an <code>archivist</code> repository, all <code>archivist</code> functions will work as is. In addition, there are several helpers in the <code>reproducible</code> package, including <code>showCache</code>, <code>keepCache</code> and <code>clearCache</code> that may be useful. Also, one can access cached items manually (rather than simply rerunning the same <code>Cache</code> function again).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">if</span> (<span class="kw">requireNamespace</span>(<span class="st">&quot;archivist&quot;</span>)) {
  <span class="co"># get the RasterLayer that was produced with the gaussMap function:</span>
  mapHash &lt;-<span class="st"> </span><span class="kw">unique</span>(<span class="kw">showCache</span>(tmpDir, <span class="dt">userTags =</span> <span class="st">&quot;projectRaster&quot;</span>)<span class="op">$</span>artifact)
  map &lt;-<span class="st"> </span>archivist<span class="op">::</span><span class="kw">loadFromLocalRepo</span>(<span class="dt">md5hash =</span> mapHash[<span class="dv">1</span>], <span class="dt">repoDir =</span> tmpDir, <span class="dt">value =</span> <span class="ot">TRUE</span>)
  
  <span class="kw">plot</span>(map)
}</code></pre></div>
<pre><code>## Cache size:</code></pre>
<pre><code>##   Total (including Rasters): 3.3 Kb</code></pre>
<pre><code>##   Selected objects (not including Rasters): 3.3 Kb</code></pre>
<p><img src="data:image/png;base64,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45i0itHFt8nV1tYePXo0Ozs7MTFRCPH973//8uXLhw4dsgr4srKyY8eOnThxYvr06UKIqVOn1tTUbN68ecKECe0rCSEqKiqioqKWLl3quEN3uUQfGhp69epVy8uRI0cuWLBg0aJFTU1Nzu9k4sSJN2/e/N82aDSagICATugdAODeTN7C9IKdpQMaGhqSkpJiY2Mta3r27OnlZZ2q165dE0KMHTvWsiYmJubs2bPtLgkhKioqBg0aVFdXV1paWl9f31aH7nIGv2DBgvT09IcPH06ZMuX1118XQnzwwQeRkZEzZ860e+WhLa2fvw8AgBBCET6KsH8G/5e//OXevXt2Sy+99JLtA94twsLCsrKyhBD37t37+9///qc//enzzz//+c9/brVZ//79hRDl5eXf+973zGs+++yzx48f19XVta/UvXv3ioqK27dvZ2ZmPn36VAgxc+bM3bt39+zZ0+qj3SXg16xZ8/Dhw9/97nfHjh374osvhBBBQUHnzp2bOXPmqVOn1O4OAODRtELYGVJnMpnWrVvn4+Nj9z1vv/326tWrv3HXWVlZ6enp/v7+M2bMGD16tFV13Lhxo0ePXrhwYXp6enBwcGFh4fHjx4UQTU1N7Ss9efKkpqZm6NChx48f79ev39mzZxcuXJiSknLixAmrj3avB90YjcaqqqoXX3zRssZkMpWUlPz1r39dsmRJB3fOg27gPB504yo86AZO6tQH3bzY/H8pP3jNttRr+i9u3brlkgfdmEymefPmNTY22gZtTU3N2rVrT58+3dzcHBcXFxUVlZqa+vTpUy8vr/aVrPa/ffv2lStX1tfXW13DdpczeDMvL6/W6S6EUBRl/Pjx48ePV6slAICnU4SPonT0pjgrp06dOnTokOUh8IqiTJo0KSUlxWg0WmVwz5499+3bZ3m5bt06vV5v3qZ9JSvh4eFCiOrqaquAd5dBdgAAdBZFK7xesLN0gFarzcnJKS0ttaz57LPPQkJCrDL48ePHY8aMMf9aL4R48uTJoUOH5s+f3+5SUVGRn59f69viL168qNPpBg4caNWhe53BAwDgel5aRePi2+RiYmKioqJ+9KMfbdy4sU+fPkVFRXv27Nm+fbu5aplNzs/Pb+DAgT/96U/r6urCwsJ27NhhNBp//OMfCyHaV5o4cWJERERSUtKKFSuGDRtWXFyckZGxbds225N7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" /><!-- --></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## cleanup
<span class="kw">unlink</span>(<span class="kw">dirname</span>(tmpDir), <span class="dt">recursive =</span> <span class="ot">TRUE</span>)</code></pre></div>
</div>
</div>
<div id="reproducible-workflow-1" class="section level1">
<h1><span class="header-section-number">2</span> Reproducible Workflow</h1>
<p>In general, we feel that a liberal use of <code>Cache</code> will make a re-usable and reproducible work flow. <code>shiny</code> apps can be made, taking advantage of <code>Cache</code>. Indeed, much of the difficulty in managing data sets and saving them for future use, can be accommodated by caching.</p>
<div id="nested-caching-1" class="section level2">
<h2><span class="header-section-number">2.1</span> Nested Caching</h2>
<div id="cache-individual-functions" class="section level4">
<h4><span class="header-section-number">2.1.0.1</span> Cache individual functions</h4>
<p><code>Cache(&lt;functionName&gt;, &lt;other arguments&gt;)</code></p>
<p>This will allow fine scale control of individual function calls.</p>
</div>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
